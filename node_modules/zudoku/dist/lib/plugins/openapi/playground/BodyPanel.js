import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { FileInput } from "lucide-react";
import { useFormContext } from "react-hook-form";
import { Collapsible, CollapsibleContent } from "zudoku/ui/Collapsible.js";
import { Textarea } from "zudoku/ui/Textarea.js";
import { cn } from "../../../util/cn.js";
import { CollapsibleHeader, CollapsibleHeaderTrigger, } from "./CollapsibleHeader.js";
import ExamplesDropdown from "./ExamplesDropdown.js";
export const BodyPanel = ({ content }) => {
    const { register, setValue, watch } = useFormContext();
    const examples = (content ?? []).flatMap((e) => e.examples);
    const headers = watch("headers");
    return (_jsxs(Collapsible, { defaultOpen: true, children: [_jsxs(CollapsibleHeaderTrigger, { children: [_jsx(FileInput, { size: 16 }), _jsx(CollapsibleHeader, { children: "Body" }), content && examples.length > 0 ? (_jsx(ExamplesDropdown, { examples: content, onSelect: (example, mediaType) => {
                            setValue("body", JSON.stringify(example.value, null, 2));
                            setValue("headers", [
                                ...headers.filter((h) => h.name !== "Content-Type"),
                                {
                                    name: "Content-Type",
                                    value: mediaType,
                                    active: true,
                                },
                            ]);
                        } })) : (_jsx("div", {}))] }), _jsx(CollapsibleContent, { className: "flex flex-col gap-2 ", children: _jsx(Textarea, { ...register("body"), className: cn("w-full p-2 h-64 font-mono md:text-xs border-none rounded-none focus-visible:ring-0"), placeholder: "Your body here..." }) })] }));
};
export default BodyPanel;
//# sourceMappingURL=BodyPanel.js.map