import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { ChevronsLeftRightIcon } from "lucide-react";
import { isValidElement, useState } from "react";
import { InlineCode } from "../../components/InlineCode.js";
import { cn } from "../../util/cn.js";
const Pattern = ({ pattern }) => {
    const [isExpanded, setIsExpanded] = useState(false);
    const isExpandable = pattern.length > 20;
    const shortPattern = isExpandable ? `${pattern.slice(0, 20)}â€¦` : pattern;
    return (_jsxs(InlineCode, { className: cn("text-xs", isExpandable && "cursor-pointer"), onClick: () => setIsExpanded(!isExpanded), selectOnClick: false, children: [isExpanded ? pattern : shortPattern, isExpandable && (_jsx("button", { type: "button", className: "p-1 translate-y-[2px]", children: !isExpanded && _jsx(ChevronsLeftRightIcon, { size: 12 }) }))] }));
};
const getSchemaInfos = (schema) => {
    if (!schema)
        return [];
    return [
        schema.type === "array" && schema.items.type
            ? Array.isArray(schema.items.type)
                ? `(${schema.items.type.join(" | ")})[]`
                : `${schema.items.type}[]`
            : Array.isArray(schema.type)
                ? schema.type.join(" | ")
                : schema.type,
        schema.enum && "enum",
        schema.const && "const",
        schema.format,
        schema.minimum !== undefined && `min: ${schema.minimum}`,
        schema.maximum !== undefined && `max: ${schema.maximum}`,
        schema.minLength !== undefined && `minLength: ${schema.minLength}`,
        schema.maxLength !== undefined && `maxLength: ${schema.maxLength}`,
        schema.minItems !== undefined && `minItems: ${schema.minItems}`,
        schema.maxItems !== undefined && `maxItems: ${schema.maxItems}`,
        schema.minProperties !== undefined && `minProps: ${schema.minProperties}`,
        schema.maxProperties !== undefined && `maxProps: ${schema.maxProperties}`,
        schema.uniqueItems && "unique",
        schema.readOnly && "readOnly",
        schema.writeOnly && "writeOnly",
        schema.deprecated && "deprecated",
        schema.pattern && (_jsxs(_Fragment, { children: ["pattern: ", _jsx(Pattern, { pattern: schema.pattern })] })),
    ];
};
export const ParamInfos = ({ schema, extraItems = [], className, }) => {
    const filteredItems = [...getSchemaInfos(schema), ...extraItems].flatMap((item) => (typeof item === "string" || isValidElement(item) ? item : []));
    return (_jsx("span", { className: className, children: filteredItems.map((item, index) => (
        // biome-ignore lint/suspicious/noArrayIndexKey: index should be stable
        _jsxs("span", { className: "text-muted-foreground", children: [item, index < filteredItems.length - 1 && (_jsx("span", { className: "text-muted-foreground/50", children: "\u00A0\u00B7\u00A0" }))] }, index))) }));
};
//# sourceMappingURL=ParamInfos.js.map