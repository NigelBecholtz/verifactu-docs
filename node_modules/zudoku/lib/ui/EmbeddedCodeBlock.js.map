{"version":3,"file":"EmbeddedCodeBlock.js","sources":["../../src/lib/ui/EmbeddedCodeBlock.tsx"],"sourcesContent":["import { CheckIcon, CopyIcon } from \"lucide-react\";\nimport type { ReactNode } from \"react\";\nimport { useRef, useState } from \"react\";\nimport { cn } from \"../util/cn.js\";\n\nexport type CodeBlockProps = {\n  className?: string;\n  noBackground?: boolean;\n  wrapLines?: boolean;\n  showLanguageIndicator?: boolean;\n  language?: string;\n  children?: ReactNode;\n  code?: ReactNode;\n  showCopy?: \"hover\" | \"always\" | \"never\";\n  showCopyText?: boolean;\n  disabled?: boolean;\n  showLineNumbers?: boolean;\n};\n\nexport const EmbeddedCodeBlock = ({\n  children,\n  language,\n  showCopy = \"hover\",\n  showCopyText,\n  showLanguageIndicator = true,\n  showLineNumbers,\n  ...props\n}: CodeBlockProps) => {\n  const [isCopied, setIsCopied] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n\n  if (!children) return null;\n\n  return (\n    <div\n      className={cn(\n        \"code-block-wrapper relative group bg-muted/50\",\n        showLineNumbers && \"line-numbers\",\n      )}\n    >\n      <div\n        className={cn(\n          \"code-block text-sm not-prose scrollbar overflow-x-auto [&>pre]:p-2\",\n          props.className,\n        )}\n        ref={ref}\n      >\n        {children}\n      </div>\n      {showLanguageIndicator && (\n        <span\n          className={cn(\n            \"absolute top-1.5 end-3 !text-[11px] font-mono text-muted-foreground transition group-hover:opacity-0\",\n            showCopy === \"always\" && \"hidden\",\n          )}\n        >\n          {language}\n        </span>\n      )}\n      {showCopy !== \"never\" && (\n        <button\n          type=\"button\"\n          aria-label=\"Copy code\"\n          title=\"Copy code\"\n          className={cn(\n            \"absolute top-2 end-2 p-2 transition hover:shadow-xs active:shadow-none active:inset-shadow-xs hover:outline outline-border rounded-md text-sm text-muted-foreground\",\n            showCopy === \"hover\" && \"opacity-0 group-hover:opacity-100\",\n            showCopyText && \"flex gap-2 items-center font-medium\",\n          )}\n          disabled={isCopied}\n          onClick={() => {\n            if (!ref.current?.textContent) return;\n\n            setIsCopied(true);\n            void navigator.clipboard.writeText(ref.current.textContent);\n            setTimeout(() => setIsCopied(false), 2000);\n          }}\n        >\n          {isCopied ? (\n            <CheckIcon\n              className=\"text-emerald-600\"\n              size={16}\n              strokeWidth={2.5}\n              absoluteStrokeWidth\n            />\n          ) : (\n            <CopyIcon size={16} />\n          )}\n          {showCopyText && \"Copy\"}\n        </button>\n      )}\n    </div>\n  );\n};\n"],"names":["EmbeddedCodeBlock","children","language","showCopy","showCopyText","showLanguageIndicator","showLineNumbers","props","isCopied","setIsCopied","useState","ref","useRef","jsxs","cn","jsx","CheckIcon","CopyIcon"],"mappings":";;;;AAmBO,MAAMA,IAAoB,CAAC;AAAA,EAChC,UAAAC;AAAA,EACA,UAAAC;AAAA,EACA,UAAAC,IAAW;AAAA,EACX,cAAAC;AAAA,EACA,uBAAAC,IAAwB;AAAA,EACxB,iBAAAC;AAAA,EACA,GAAGC;AACL,MAAsB;AACpB,QAAM,CAACC,GAAUC,CAAW,IAAIC,EAAS,EAAK,GACxCC,IAAMC,EAAuB,IAAI;AAEvC,SAAKX,IAGHY,gBAAAA,EAAAA;AAAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAWC;AAAA,QACT;AAAA,QACAR,KAAmB;AAAA,MAAA;AAAA,MAGrB,UAAA;AAAA,QAAAS,gBAAAA,EAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,WAAWD;AAAA,cACT;AAAA,cACAP,EAAM;AAAA,YAAA;AAAA,YAER,KAAAI;AAAA,YAEC,UAAAV;AAAA,UAAA;AAAA,QAAA;AAAA,QAEFI,KACCU,gBAAAA,EAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,WAAWD;AAAA,cACT;AAAA,cACAX,MAAa,YAAY;AAAA,YAAA;AAAA,YAG1B,UAAAD;AAAA,UAAA;AAAA,QAAA;AAAA,QAGJC,MAAa,WACZU,gBAAAA,EAAAA;AAAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,cAAW;AAAA,YACX,OAAM;AAAA,YACN,WAAWC;AAAA,cACT;AAAA,cACAX,MAAa,WAAW;AAAA,cACxBC,KAAgB;AAAA,YAAA;AAAA,YAElB,UAAUI;AAAA,YACV,SAAS,MAAM;AACb,cAAKG,EAAI,SAAS,gBAElBF,EAAY,EAAI,GACX,UAAU,UAAU,UAAUE,EAAI,QAAQ,WAAW,GAC1D,WAAW,MAAMF,EAAY,EAAK,GAAG,GAAI;AAAA,YAC3C;AAAA,YAEC,UAAA;AAAA,cAAAD,IACCO,gBAAAA,EAAAA;AAAAA,gBAACC;AAAA,gBAAA;AAAA,kBACC,WAAU;AAAA,kBACV,MAAM;AAAA,kBACN,aAAa;AAAA,kBACb,qBAAmB;AAAA,gBAAA;AAAA,cAAA,IAGrBD,gBAAAA,EAAAA,IAACE,GAAA,EAAS,MAAM,GAAA,CAAI;AAAA,cAErBb,KAAgB;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA;AAAA,MACnB;AAAA,IAAA;AAAA,EAAA,IA1DgB;AA8DxB;"}