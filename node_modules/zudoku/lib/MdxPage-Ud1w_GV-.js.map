{"version":3,"file":"MdxPage-Ud1w_GV-.js","sources":["../src/lib/plugins/markdown/MdxPage.tsx"],"sourcesContent":["import { useMDXComponents } from \"@mdx-js/react\";\nimport slugify from \"@sindresorhus/slugify\";\nimport { Helmet } from \"@zudoku/react-helmet-async\";\nimport { EditIcon } from \"lucide-react\";\nimport { type PropsWithChildren, useEffect } from \"react\";\nimport { Button } from \"zudoku/ui/Button.js\";\nimport { CategoryHeading } from \"../../components/CategoryHeading.js\";\nimport { Heading } from \"../../components/Heading.js\";\nimport { Toc } from \"../../components/navigation/Toc.js\";\nimport {\n  useCurrentItem,\n  usePrevNext,\n} from \"../../components/navigation/utils.js\";\nimport { Pagination } from \"../../components/Pagination.js\";\nimport { Typography } from \"../../components/Typography.js\";\nimport type { MdxComponentsType } from \"../../util/MdxComponents.js\";\nimport type { MarkdownPluginDefaultOptions, MDXImport } from \"./index.js\";\n\ndeclare global {\n  interface Window {\n    __getReactRefreshIgnoredExports?: (args: {\n      id: string;\n    }) => string[] | undefined;\n  }\n}\n\nconst MarkdownHeadings = {\n  h2: ({ children, id }) => (\n    <Heading level={2} id={id} registerNavigationAnchor>\n      {children}\n    </Heading>\n  ),\n  h3: ({ children, id }) => (\n    <Heading level={3} id={id} registerNavigationAnchor>\n      {children}\n    </Heading>\n  ),\n} satisfies MdxComponentsType;\n\nexport const MdxPage = ({\n  mdxComponent: MdxComponent,\n  frontmatter = {},\n  defaultOptions,\n  __filepath,\n  tableOfContents,\n  excerpt,\n}: PropsWithChildren<\n  Omit<MDXImport, \"default\"> & {\n    mdxComponent: MDXImport[\"default\"];\n    defaultOptions?: MarkdownPluginDefaultOptions;\n  }\n>) => {\n  const categoryTitle = useCurrentItem()?.categoryLabel;\n\n  const title = frontmatter.title;\n  const description = frontmatter.description ?? excerpt;\n  const category = frontmatter.category ?? categoryTitle;\n  const hideToc = frontmatter.toc === false || defaultOptions?.toc === false;\n  const pageTitle =\n    title ?? tableOfContents.find((item) => item.depth === 1)?.value;\n  const hidePager =\n    frontmatter.disable_pager ??\n    frontmatter.disablePager ??\n    defaultOptions?.disablePager ??\n    false;\n\n  const showLastModified =\n    frontmatter.showLastModified ?? defaultOptions?.showLastModified ?? true;\n\n  const lastModifiedDate = frontmatter.lastModifiedTime\n    ? new Date(frontmatter.lastModifiedTime)\n    : null;\n\n  const editConfig =\n    frontmatter.suggestEdit !== false &&\n    (frontmatter.suggestEdit ?? defaultOptions?.suggestEdit);\n\n  const editUrl = editConfig\n    ? editConfig.url.replaceAll(\"{filePath}\", __filepath)\n    : null;\n  const editText = editConfig ? editConfig.text || \"Edit this page\" : null;\n\n  const tocEntries =\n    tableOfContents.find((item) => item.depth === 1)?.children ??\n    // if `title` is provided by frontmatter it does not appear in the table of contents\n    tableOfContents.filter((item) => item.depth === 2);\n\n  const showToc = !hideToc && tocEntries.length > 0;\n\n  const { prev, next } = usePrevNext();\n\n  useEffect(() => {\n    if (process.env.NODE_ENV === \"development\") {\n      window.__getReactRefreshIgnoredExports = ({ id }) => {\n        if (!id.endsWith(__filepath)) return;\n\n        return [\"frontmatter\", \"tableOfContents\"];\n      };\n\n      return () => {\n        window.__getReactRefreshIgnoredExports = undefined;\n      };\n    }\n  }, [__filepath]);\n\n  return (\n    <div\n      className=\"grid grid-cols-1 xl:grid-cols-(--sidecar-grid-cols) gap-8 justify-between\"\n      data-pagefind-filter=\"section:markdown\"\n      data-pagefind-meta=\"section:markdown\"\n    >\n      <Helmet>\n        <title>{pageTitle}</title>\n        {description && <meta name=\"description\" content={description} />}\n      </Helmet>\n      <Typography className=\"max-w-full xl:w-full xl:max-w-3xl flex-1 shrink pt-(--padding-content-top)\">\n        {(category || title) && (\n          <header>\n            {category && <CategoryHeading>{category}</CategoryHeading>}\n            {title && (\n              <Heading level={1} id={slugify(title)}>\n                {title}\n              </Heading>\n            )}\n          </header>\n        )}\n        <MdxComponent\n          components={{ ...useMDXComponents(), ...MarkdownHeadings }}\n        />\n        <div className=\"h-16\" />\n        {(showLastModified && lastModifiedDate) || editUrl ? (\n          <div className=\"flex justify-between text-xs text-muted-foreground \">\n            <div />\n            <div className=\"flex items-center gap-2\">\n              <div>\n                {editUrl && (\n                  <Button asChild variant=\"ghost\" size=\"sm\">\n                    <a\n                      href={editUrl}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center gap-1\"\n                    >\n                      <EditIcon size={12} />\n                      {editText}\n                    </a>\n                  </Button>\n                )}\n              </div>\n              <div>\n                {showLastModified && lastModifiedDate && (\n                  <div\n                    title={lastModifiedDate.toLocaleString(undefined, {\n                      dateStyle: \"full\",\n                      timeStyle: \"medium\",\n                    })}\n                  >\n                    Last modified on{\" \"}\n                    <time dateTime={lastModifiedDate.toISOString()}>\n                      {lastModifiedDate.toLocaleDateString(\"en-US\", {\n                        dateStyle: \"long\",\n                      })}\n                    </time>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        ) : null}\n        {!hidePager && (\n          <>\n            <div className=\"h-px bg-border mt-2 mb-6\" />\n            <Pagination\n              prev={prev ? { to: prev.id, label: prev.label ?? \"\" } : undefined}\n              next={next ? { to: next.id, label: next.label ?? \"\" } : undefined}\n              className=\"mb-10\"\n            />\n          </>\n        )}\n      </Typography>\n      <div className=\"hidden xl:block\" data-pagefind-ignore=\"all\">\n        {showToc && <Toc entries={tocEntries} />}\n      </div>\n    </div>\n  );\n};\n"],"names":["MarkdownHeadings","children","id","jsx","Heading","MdxPage","MdxComponent","frontmatter","defaultOptions","__filepath","tableOfContents","excerpt","categoryTitle","useCurrentItem","title","description","category","hideToc","pageTitle","item","hidePager","showLastModified","lastModifiedDate","editConfig","editUrl","editText","tocEntries","showToc","prev","next","usePrevNext","useEffect","jsxs","Helmet","Typography","CategoryHeading","slugify","useMDXComponents","Button","EditIcon","Fragment","Pagination","Toc"],"mappings":";;;;;;;;;;;;AA0BA,MAAMA,IAAmB;AAAA,EACvB,IAAI,CAAC,EAAE,UAAAC,GAAU,IAAAC,EAAA,MACfC,gBAAAA,EAAAA,IAACC,GAAA,EAAQ,OAAO,GAAG,IAAAF,GAAQ,0BAAwB,IAChD,UAAAD,EAAA,CACH;AAAA,EAEF,IAAI,CAAC,EAAE,UAAAA,GAAU,IAAAC,EAAA,MACfC,gBAAAA,EAAAA,IAACC,GAAA,EAAQ,OAAO,GAAG,IAAAF,GAAQ,0BAAwB,IAChD,UAAAD,EAAA,CACH;AAEJ,GAEaI,IAAU,CAAC;AAAA,EACtB,cAAcC;AAAA,EACd,aAAAC,IAAc,CAAA;AAAA,EACd,gBAAAC;AAAA,EACA,YAAAC;AAAA,EACA,iBAAAC;AAAA,EACA,SAAAC;AACF,MAKM;AACJ,QAAMC,IAAgBC,KAAkB,eAElCC,IAAQP,EAAY,OACpBQ,IAAcR,EAAY,eAAeI,GACzCK,IAAWT,EAAY,YAAYK,GACnCK,IAAUV,EAAY,QAAQ,MAASC,GAAgB,QAAQ,IAC/DU,IACJJ,KAASJ,EAAgB,KAAK,CAACS,MAASA,EAAK,UAAU,CAAC,GAAG,OACvDC,IACJb,EAAY,iBACZA,EAAY,gBACZC,GAAgB,gBAChB,IAEIa,IACJd,EAAY,oBAAoBC,GAAgB,oBAAoB,IAEhEc,IAAmBf,EAAY,mBACjC,IAAI,KAAKA,EAAY,gBAAgB,IACrC,MAEEgB,IACJhB,EAAY,gBAAgB,OAC3BA,EAAY,eAAeC,GAAgB,cAExCgB,IAAUD,IACZA,EAAW,IAAI,WAAW,cAAcd,CAAU,IAClD,MACEgB,IAAWF,IAAaA,EAAW,QAAQ,mBAAmB,MAE9DG,IACJhB,EAAgB,KAAK,CAACS,MAASA,EAAK,UAAU,CAAC,GAAG;AAAA,EAElDT,EAAgB,OAAO,CAACS,MAASA,EAAK,UAAU,CAAC,GAE7CQ,IAAU,CAACV,KAAWS,EAAW,SAAS,GAE1C,EAAE,MAAAE,GAAM,MAAAC,EAAA,IAASC,EAAA;AAEvB,SAAAC,EAAU,MAAM;AACd,QAAI,QAAQ,IAAI,aAAa;AAC3B,oBAAO,kCAAkC,CAAC,EAAE,IAAA7B,QAAS;AACnD,YAAKA,EAAG,SAASO,CAAU;AAE3B,iBAAO,CAAC,eAAe,iBAAiB;AAAA,MAC1C,GAEO,MAAM;AACX,eAAO,kCAAkC;AAAA,MAC3C;AAAA,EAEJ,GAAG,CAACA,CAAU,CAAC,GAGbuB,gBAAAA,EAAAA;AAAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAU;AAAA,MACV,wBAAqB;AAAA,MACrB,sBAAmB;AAAA,MAEnB,UAAA;AAAA,QAAAA,gBAAAA,OAACC,GAAA,EACC,UAAA;AAAA,UAAA9B,gBAAAA,EAAAA,IAAC,WAAO,UAAAe,EAAA,CAAU;AAAA,UACjBH,KAAeZ,gBAAAA,EAAAA,IAAC,QAAA,EAAK,MAAK,eAAc,SAASY,EAAA,CAAa;AAAA,QAAA,GACjE;AAAA,QACAiB,gBAAAA,EAAAA,KAACE,GAAA,EAAW,WAAU,8EAClB,UAAA;AAAA,WAAAlB,KAAYF,6BACX,UAAA,EACE,UAAA;AAAA,YAAAE,KAAYb,gBAAAA,EAAAA,IAACgC,KAAiB,UAAAnB,EAAA,CAAS;AAAA,YACvCF,2BACEV,GAAA,EAAQ,OAAO,GAAG,IAAIgC,EAAQtB,CAAK,GACjC,UAAAA,EAAA,CACH;AAAA,UAAA,GAEJ;AAAA,UAEFX,gBAAAA,EAAAA;AAAAA,YAACG;AAAA,YAAA;AAAA,cACC,YAAY,EAAE,GAAG+B,EAAA,GAAoB,GAAGrC,EAAA;AAAA,YAAiB;AAAA,UAAA;AAAA,UAE3DG,gBAAAA,EAAAA,IAAC,OAAA,EAAI,WAAU,OAAA,CAAO;AAAA,UACpBkB,KAAoBC,KAAqBE,IACzCQ,gBAAAA,EAAAA,KAAC,OAAA,EAAI,WAAU,uDACb,UAAA;AAAA,YAAA7B,gBAAAA,EAAAA,IAAC,OAAA,EAAI;AAAA,YACL6B,gBAAAA,EAAAA,KAAC,OAAA,EAAI,WAAU,2BACb,UAAA;AAAA,cAAA7B,gBAAAA,EAAAA,IAAC,OAAA,EACE,eACCA,gBAAAA,EAAAA,IAACmC,GAAA,EAAO,SAAO,IAAC,SAAQ,SAAQ,MAAK,MACnC,UAAAN,gBAAAA,EAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,MAAMR;AAAA,kBACN,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,WAAU;AAAA,kBAEV,UAAA;AAAA,oBAAArB,gBAAAA,EAAAA,IAACoC,GAAA,EAAS,MAAM,GAAA,CAAI;AAAA,oBACnBd;AAAA,kBAAA;AAAA,gBAAA;AAAA,cAAA,GAEL,EAAA,CAEJ;AAAA,cACAtB,gBAAAA,EAAAA,IAAC,OAAA,EACE,UAAAkB,KAAoBC,KACnBU,gBAAAA,EAAAA;AAAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,OAAOV,EAAiB,eAAe,QAAW;AAAA,oBAChD,WAAW;AAAA,oBACX,WAAW;AAAA,kBAAA,CACZ;AAAA,kBACF,UAAA;AAAA,oBAAA;AAAA,oBACkB;AAAA,oBACjBnB,gBAAAA,MAAC,UAAK,UAAUmB,EAAiB,eAC9B,UAAAA,EAAiB,mBAAmB,SAAS;AAAA,sBAC5C,WAAW;AAAA,oBAAA,CACZ,EAAA,CACH;AAAA,kBAAA;AAAA,gBAAA;AAAA,cAAA,EACF,CAEJ;AAAA,YAAA,EAAA,CACF;AAAA,UAAA,EAAA,CACF,IACE;AAAA,UACH,CAACF,KACAY,gBAAAA,EAAAA,KAAAQ,EAAAA,UAAA,EACE,UAAA;AAAA,YAAArC,gBAAAA,EAAAA,IAAC,OAAA,EAAI,WAAU,2BAAA,CAA2B;AAAA,YAC1CA,gBAAAA,EAAAA;AAAAA,cAACsC;AAAA,cAAA;AAAA,gBACC,MAAMb,IAAO,EAAE,IAAIA,EAAK,IAAI,OAAOA,EAAK,SAAS,GAAA,IAAO;AAAA,gBACxD,MAAMC,IAAO,EAAE,IAAIA,EAAK,IAAI,OAAOA,EAAK,SAAS,GAAA,IAAO;AAAA,gBACxD,WAAU;AAAA,cAAA;AAAA,YAAA;AAAA,UACZ,EAAA,CACF;AAAA,QAAA,GAEJ;AAAA,QACA1B,gBAAAA,EAAAA,IAAC,OAAA,EAAI,WAAU,mBAAkB,wBAAqB,OACnD,UAAAwB,KAAWxB,gBAAAA,EAAAA,IAACuC,GAAA,EAAI,SAAShB,EAAA,CAAY,EAAA,CACxC;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGN;"}