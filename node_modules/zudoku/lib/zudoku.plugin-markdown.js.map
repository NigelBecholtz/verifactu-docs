{"version":3,"file":"zudoku.plugin-markdown.js","sources":["../src/lib/plugins/markdown/index.tsx"],"sourcesContent":["import type { Toc } from \"@stefanprobst/rehype-extract-toc\";\nimport type { MDXProps } from \"mdx/types.js\";\nimport type { JSX } from \"react\";\nimport type { ZudokuDocsConfig } from \"../../../config/validators/validate.js\";\nimport type { ZudokuPlugin } from \"../../core/plugins.js\";\n\nexport interface MarkdownPluginOptions extends ZudokuDocsConfig {\n  fileImports: Record<string, () => Promise<MDXImport>>;\n}\nexport type MarkdownPluginDefaultOptions = Pick<\n  Frontmatter,\n  \"toc\" | \"disablePager\" | \"showLastModified\" | \"suggestEdit\"\n>;\n\nexport type Frontmatter = {\n  title?: string;\n  description?: string;\n  category?: string;\n  toc?: boolean;\n  disablePager?: boolean;\n  disable_pager?: boolean;\n  showLastModified?: boolean;\n  lastModifiedTime?: number;\n  suggestEdit?:\n    | {\n        url: string;\n        text?: string;\n      }\n    | false;\n};\n\nexport type MDXImport = {\n  tableOfContents: Toc;\n  frontmatter: Frontmatter;\n  excerpt?: string;\n  __filepath: string;\n  default: (props: MDXProps) => JSX.Element;\n};\n\nexport const markdownPlugin = (\n  options: MarkdownPluginOptions,\n): ZudokuPlugin => ({\n  getRoutes: () => {\n    return Object.entries(options.fileImports).map(\n      ([routePath, importPromise]) => ({\n        path: routePath,\n        lazy: async () => {\n          const { MdxPage } = await import(\"./MdxPage.js\");\n          const { default: Component, ...props } = await importPromise();\n          return {\n            element: (\n              <MdxPage\n                mdxComponent={Component}\n                {...props}\n                defaultOptions={options.defaultOptions}\n              />\n            ),\n          };\n        },\n      }),\n    );\n  },\n});\n"],"names":["markdownPlugin","options","routePath","importPromise","MdxPage","Component","props","jsx"],"mappings":";AAuCO,MAAMA,IAAiB,CAC5BC,OACkB;AAAA,EAClB,WAAW,MACF,OAAO,QAAQA,EAAQ,WAAW,EAAE;AAAA,IACzC,CAAC,CAACC,GAAWC,CAAa,OAAO;AAAA,MAC/B,MAAMD;AAAA,MACN,MAAM,YAAY;AAChB,cAAM,EAAE,SAAAE,EAAA,IAAY,MAAM,OAAO,uBAAc,GACzC,EAAE,SAASC,GAAW,GAAGC,EAAA,IAAU,MAAMH,EAAA;AAC/C,eAAO;AAAA,UACL,SACEI,gBAAAA,EAAAA;AAAAA,YAACH;AAAA,YAAA;AAAA,cACC,cAAcC;AAAA,cACb,GAAGC;AAAA,cACJ,gBAAgBL,EAAQ;AAAA,YAAA;AAAA,UAAA;AAAA,QAC1B;AAAA,MAGN;AAAA,IAAA;AAAA,EACF;AAGN;"}