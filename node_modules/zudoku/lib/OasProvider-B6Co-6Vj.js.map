{"version":3,"file":"OasProvider-B6Co-6Vj.js","sources":["../src/lib/util/joinPath.tsx","../src/lib/plugins/openapi/OasProvider.tsx"],"sourcesContent":["/**\n * @deprecated Use `joinUrl` instead.\n */\nexport const joinPath = (\n  ...parts: Array<string | null | undefined | boolean>\n) => {\n  const cleanPath = parts\n    .filter((part): part is string => Boolean(part))\n    .map((part) => part.replace(/(^\\/+|\\/+$)/g, \"\")) // Strip leading and trailing slashes\n    .join(\"/\")\n    .replace(/(^\\/+|\\/+$)/g, \"\");\n\n  return cleanPath ? `/${cleanPath}` : \"/\";\n};\n","import { useMemo } from \"react\";\nimport { Outlet } from \"react-router\";\nimport { joinPath } from \"../../util/joinPath.js\";\nimport type { GraphQLClient } from \"./client/GraphQLClient.js\";\nimport { GraphQLProvider } from \"./client/GraphQLContext.js\";\nimport { OasConfigProvider } from \"./context.js\";\nimport type { OasPluginConfig } from \"./interfaces.js\";\nimport { getVersions } from \"./util/getRoutes.js\";\n\nexport const OasProvider = ({\n  basePath,\n  version,\n  config,\n  client,\n}: {\n  basePath: string;\n  version?: string;\n  config: OasPluginConfig;\n  client: GraphQLClient;\n}) => {\n  const value = useMemo(() => {\n    const versions = getVersions(config);\n    const firstVersion = Object.values(config.input).at(0);\n    const input =\n      config.type === \"file\"\n        ? {\n            type: config.type,\n            // biome-ignore lint/style/noNonNullAssertion: is guaranteed to be defined\n            input: version ? config.input[version]! : firstVersion!,\n          }\n        : { type: config.type, input: config.input };\n\n    return {\n      config: {\n        ...config,\n        version: version ?? versions.at(0),\n        versions: Object.fromEntries(\n          versions.map((version) => [version, joinPath(basePath, version)]),\n        ),\n        ...input,\n      },\n    };\n  }, [config, basePath, version]);\n\n  return (\n    <OasConfigProvider value={value}>\n      <GraphQLProvider client={client}>\n        <Outlet />\n      </GraphQLProvider>\n    </OasConfigProvider>\n  );\n};\n"],"names":["joinPath","parts","cleanPath","part","OasProvider","basePath","version","config","client","value","useMemo","versions","getVersions","firstVersion","input","jsx","OasConfigProvider","GraphQLProvider","Outlet"],"mappings":";;;;AAGO,MAAMA,IAAW,IACnBC,MACA;AACH,QAAMC,IAAYD,EACf,OAAO,CAACE,MAAyB,EAAQA,CAAK,EAC9C,IAAI,CAACA,MAASA,EAAK,QAAQ,gBAAgB,EAAE,CAAC,EAC9C,KAAK,GAAG,EACR,QAAQ,gBAAgB,EAAE;AAE7B,SAAOD,IAAY,IAAIA,CAAS,KAAK;AACvC,GCJaE,IAAc,CAAC;AAAA,EAC1B,UAAAC;AAAA,EACA,SAAAC;AAAA,EACA,QAAAC;AAAA,EACA,QAAAC;AACF,MAKM;AACJ,QAAMC,IAAQC,EAAQ,MAAM;AAC1B,UAAMC,IAAWC,EAAYL,CAAM,GAC7BM,IAAe,OAAO,OAAON,EAAO,KAAK,EAAE,GAAG,CAAC,GAC/CO,IACJP,EAAO,SAAS,SACZ;AAAA,MACE,MAAMA,EAAO;AAAA;AAAA,MAEb,OAAOD,IAAUC,EAAO,MAAMD,CAAO,IAAKO;AAAA,IAAA,IAE5C,EAAE,MAAMN,EAAO,MAAM,OAAOA,EAAO,MAAA;AAEzC,WAAO;AAAA,MACL,QAAQ;AAAA,QACN,GAAGA;AAAA,QACH,SAASD,KAAWK,EAAS,GAAG,CAAC;AAAA,QACjC,UAAU,OAAO;AAAA,UACfA,EAAS,IAAI,CAACL,MAAY,CAACA,GAASN,EAASK,GAAUC,CAAO,CAAC,CAAC;AAAA,QAAA;AAAA,QAElE,GAAGQ;AAAA,MAAA;AAAA,IACL;AAAA,EAEJ,GAAG,CAACP,GAAQF,GAAUC,CAAO,CAAC;AAE9B,SACES,gBAAAA,EAAAA,IAACC,KAAkB,OAAAP,GACjB,UAAAM,gBAAAA,EAAAA,IAACE,KAAgB,QAAAT,GACf,UAAAO,gBAAAA,EAAAA,IAACG,GAAA,CAAA,CAAO,EAAA,CACV,EAAA,CACF;AAEJ;"}