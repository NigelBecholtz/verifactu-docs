{"version":3,"file":"zudoku.plugin-api-keys.js","sources":["../src/lib/plugins/api-keys/ProtectedRoute.tsx","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/utils/use-constant.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/utils/is-browser.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/context/PresenceContext.mjs","../../../node_modules/.pnpm/motion-utils@12.23.6/node_modules/motion-utils/dist/es/is-object.mjs","../../../node_modules/.pnpm/motion-dom@12.23.12/node_modules/motion-dom/dist/es/utils/is-html-element.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/components/AnimatePresence/PopChild.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/components/AnimatePresence/utils.mjs","../../../node_modules/.pnpm/framer-motion@12.23.12_@emotion+is-prop-valid@0.8.8_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","../src/lib/ui/ActionButton.tsx","../src/lib/plugins/api-keys/CreateApiKey.tsx","../src/lib/plugins/api-keys/CreateApiKeyDialog.tsx","../src/lib/plugins/api-keys/SettingsApiKeys.tsx","../src/lib/plugins/api-keys/index.tsx"],"sourcesContent":["import { Outlet } from \"react-router\";\nimport { useAuth } from \"../../authentication/hook.js\";\nimport { DeveloperHint } from \"../../components/DeveloperHint.js\";\nimport { Button } from \"../../ui/Button.js\";\n\nexport const ProtectedRoute = () => {\n  const auth = useAuth();\n\n  // TODO: should we suspend here somehow?\n  if (auth.isAuthEnabled && auth.isPending) {\n    return null;\n  }\n\n  return auth.isAuthenticated ? (\n    <Outlet />\n  ) : !auth.isAuthEnabled ? (\n    <div className=\"flex flex-col justify-center gap-2 items-center h-1/2\">\n      <DeveloperHint className=\"max-w-[600px]\">\n        Authentication needs to be enabled for API keys to work. Enable it in\n        your Zudoku configuration under <code>authentication</code>.\n      </DeveloperHint>\n    </div>\n  ) : (\n    <div className=\"flex flex-col justify-center gap-2 items-center h-1/2\">\n      Please login first to view this page\n      <Button onClick={() => auth.login()}>Login</Button>\n    </div>\n  );\n};\n","\"use client\";\nimport { createContext } from 'react';\n\nconst LayoutGroupContext = createContext({});\n\nexport { LayoutGroupContext };\n","import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","const isBrowser = typeof window !== \"undefined\";\n\nexport { isBrowser };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\n\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","\"use client\";\nimport { createContext } from 'react';\n\n/**\n * @public\n */\nconst PresenceContext = \n/* @__PURE__ */ createContext(null);\n\nexport { PresenceContext };\n","function isObject(value) {\n    return typeof value === \"object\" && value !== null;\n}\n\nexport { isObject };\n","import { isObject } from 'motion-utils';\n\n/**\n * Checks if an element is an HTML element in a way\n * that works across iframes\n */\nfunction isHTMLElement(element) {\n    return isObject(element) && \"offsetHeight\" in element;\n}\n\nexport { isHTMLElement };\n","\"use client\";\nimport { createContext } from 'react';\n\n/**\n * @public\n */\nconst MotionConfigContext = createContext({\n    transformPagePoint: (p) => p,\n    isStatic: false,\n    reducedMotion: \"never\",\n});\n\nexport { MotionConfigContext };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport { isHTMLElement } from 'motion-dom';\nimport * as React from 'react';\nimport { useId, useRef, useContext, useInsertionEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component {\n    getSnapshotBeforeUpdate(prevProps) {\n        const element = this.props.childRef.current;\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const parent = element.offsetParent;\n            const parentWidth = isHTMLElement(parent)\n                ? parent.offsetWidth || 0\n                : 0;\n            const size = this.props.sizeRef.current;\n            size.height = element.offsetHeight || 0;\n            size.width = element.offsetWidth || 0;\n            size.top = element.offsetTop;\n            size.left = element.offsetLeft;\n            size.right = parentWidth - size.width - size.left;\n        }\n        return null;\n    }\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() { }\n    render() {\n        return this.props.children;\n    }\n}\nfunction PopChild({ children, isPresent, anchorX, root }) {\n    const id = useId();\n    const ref = useRef(null);\n    const size = useRef({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n    });\n    const { nonce } = useContext(MotionConfigContext);\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left, right } = size.current;\n        if (isPresent || !ref.current || !width || !height)\n            return;\n        const x = anchorX === \"left\" ? `left: ${left}` : `right: ${right}`;\n        ref.current.dataset.motionPopId = id;\n        const style = document.createElement(\"style\");\n        if (nonce)\n            style.nonce = nonce;\n        const parent = root ?? document.head;\n        parent.appendChild(style);\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            top: ${top}px !important;\n          }\n        `);\n        }\n        return () => {\n            if (parent.contains(style)) {\n                parent.removeChild(style);\n            }\n        };\n    }, [isPresent]);\n    return (jsx(PopChildMeasure, { isPresent: isPresent, childRef: ref, sizeRef: size, children: React.cloneElement(children, { ref }) }));\n}\n\nexport { PopChild };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, anchorX, root }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    let isReusedContext = true;\n    let context = useMemo(() => {\n        isReusedContext = false;\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId) => {\n                presenceChildren.set(childId, true);\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete)\n                        return; // can stop searching when any is incomplete\n                }\n                onExitComplete && onExitComplete();\n            },\n            register: (childId) => {\n                presenceChildren.set(childId, false);\n                return () => presenceChildren.delete(childId);\n            },\n        };\n    }, [isPresent, presenceChildren, onExitComplete]);\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context };\n    }\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = (jsx(PopChild, { isPresent: isPresent, anchorX: anchorX, root: root, children: children }));\n    }\n    return (jsx(PresenceContext.Provider, { value: context, children: children }));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","import { useContext, useId, useEffect, useCallback } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence(subscribe = true) {\n    const context = useContext(PresenceContext);\n    if (context === null)\n        return [true, null];\n    const { isPresent, onExitComplete, register } = context;\n    // It's safe to call the following hooks conditionally (after an early return) because the context will always\n    // either be null or non-null for the lifespan of the component.\n    const id = useId();\n    useEffect(() => {\n        if (subscribe) {\n            return register(id);\n        }\n    }, [subscribe]);\n    const safeToRemove = useCallback(() => subscribe && onExitComplete && onExitComplete(id), [id, onExitComplete, subscribe]);\n    return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n    return isPresent(useContext(PresenceContext));\n}\nfunction isPresent(context) {\n    return context === null ? true : context.isPresent;\n}\n\nexport { isPresent, useIsPresent, usePresence };\n","import { Children, isValidElement } from 'react';\n\nconst getChildKey = (child) => child.key || \"\";\nfunction onlyElements(children) {\n    const filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n\nexport { getChildKey, onlyElements };\n","\"use client\";\nimport { jsx, Fragment } from 'react/jsx-runtime';\nimport { useMemo, useRef, useState, useContext } from 'react';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { usePresence } from './use-presence.mjs';\nimport { onlyElements, getChildKey } from './utils.mjs';\n\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nconst AnimatePresence = ({ children, custom, initial = true, onExitComplete, presenceAffectsLayout = true, mode = \"sync\", propagate = false, anchorX = \"left\", root }) => {\n    const [isParentPresent, safeToRemove] = usePresence(propagate);\n    /**\n     * Filter any children that aren't ReactElements. We can only track components\n     * between renders with a props.key.\n     */\n    const presentChildren = useMemo(() => onlyElements(children), [children]);\n    /**\n     * Track the keys of the currently rendered children. This is used to\n     * determine which children are exiting.\n     */\n    const presentKeys = propagate && !isParentPresent ? [] : presentChildren.map(getChildKey);\n    /**\n     * If `initial={false}` we only want to pass this to components in the first render.\n     */\n    const isInitialRender = useRef(true);\n    /**\n     * A ref containing the currently present children. When all exit animations\n     * are complete, we use this to re-render the component with the latest children\n     * *committed* rather than the latest children *rendered*.\n     */\n    const pendingPresentChildren = useRef(presentChildren);\n    /**\n     * Track which exiting children have finished animating out.\n     */\n    const exitComplete = useConstant(() => new Map());\n    /**\n     * Save children to render as React state. To ensure this component is concurrent-safe,\n     * we check for exiting children via an effect.\n     */\n    const [diffedChildren, setDiffedChildren] = useState(presentChildren);\n    const [renderedChildren, setRenderedChildren] = useState(presentChildren);\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false;\n        pendingPresentChildren.current = presentChildren;\n        /**\n         * Update complete status of exiting children.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const key = getChildKey(renderedChildren[i]);\n            if (!presentKeys.includes(key)) {\n                if (exitComplete.get(key) !== true) {\n                    exitComplete.set(key, false);\n                }\n            }\n            else {\n                exitComplete.delete(key);\n            }\n        }\n    }, [renderedChildren, presentKeys.length, presentKeys.join(\"-\")]);\n    const exitingChildren = [];\n    if (presentChildren !== diffedChildren) {\n        let nextChildren = [...presentChildren];\n        /**\n         * Loop through all the currently rendered components and decide which\n         * are exiting.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const child = renderedChildren[i];\n            const key = getChildKey(child);\n            if (!presentKeys.includes(key)) {\n                nextChildren.splice(i, 0, child);\n                exitingChildren.push(child);\n            }\n        }\n        /**\n         * If we're in \"wait\" mode, and we have exiting children, we want to\n         * only render these until they've all exited.\n         */\n        if (mode === \"wait\" && exitingChildren.length) {\n            nextChildren = exitingChildren;\n        }\n        setRenderedChildren(onlyElements(nextChildren));\n        setDiffedChildren(presentChildren);\n        /**\n         * Early return to ensure once we've set state with the latest diffed\n         * children, we can immediately re-render.\n         */\n        return null;\n    }\n    if (process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        renderedChildren.length > 1) {\n        console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`);\n    }\n    /**\n     * If we've been provided a forceRender function by the LayoutGroupContext,\n     * we can use it to force a re-render amongst all surrounding components once\n     * all components have finished animating out.\n     */\n    const { forceRender } = useContext(LayoutGroupContext);\n    return (jsx(Fragment, { children: renderedChildren.map((child) => {\n            const key = getChildKey(child);\n            const isPresent = propagate && !isParentPresent\n                ? false\n                : presentChildren === renderedChildren ||\n                    presentKeys.includes(key);\n            const onExit = () => {\n                if (exitComplete.has(key)) {\n                    exitComplete.set(key, true);\n                }\n                else {\n                    return;\n                }\n                let isEveryExitComplete = true;\n                exitComplete.forEach((isExitComplete) => {\n                    if (!isExitComplete)\n                        isEveryExitComplete = false;\n                });\n                if (isEveryExitComplete) {\n                    forceRender?.();\n                    setRenderedChildren(pendingPresentChildren.current);\n                    propagate && safeToRemove?.();\n                    onExitComplete && onExitComplete();\n                }\n            };\n            return (jsx(PresenceChild, { isPresent: isPresent, initial: !isInitialRender.current || initial\n                    ? undefined\n                    : false, custom: custom, presenceAffectsLayout: presenceAffectsLayout, mode: mode, root: root, onExitComplete: isPresent ? undefined : onExit, anchorX: anchorX, children: child }, key));\n        }) }));\n};\n\nexport { AnimatePresence };\n","import { forwardRef } from \"react\";\nimport { Button, type ButtonProps } from \"zudoku/ui/Button.js\";\nimport { Spinner } from \"../components/Spinner.js\";\nimport { cn } from \"../util/cn.js\";\n\ntype ActionButtonProps = ButtonProps & { isPending?: boolean };\n\nexport const ActionButton = forwardRef<HTMLButtonElement, ActionButtonProps>(\n  ({ isPending, children, className, ...props }: ActionButtonProps, ref) => {\n    return (\n      <Button\n        ref={ref}\n        disabled={isPending}\n        {...props}\n        className={cn(\"relative\", className)}\n      >\n        {isPending && (\n          <div className=\"absolute inset-0 grid place-items-center\">\n            <Spinner />\n          </div>\n        )}\n        <span className={cn(\"block\", isPending && \"invisible\")}>\n          {children}\n        </span>\n      </Button>\n    );\n  },\n);\n\nActionButton.displayName = \"ActionButton\";\n","import { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router\";\nimport { ActionButton } from \"zudoku/ui/ActionButton.js\";\nimport { Alert, AlertDescription, AlertTitle } from \"zudoku/ui/Alert.js\";\nimport { DialogClose, DialogFooter } from \"zudoku/ui/Dialog.js\";\nimport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"zudoku/ui/Select.js\";\nimport { useZudoku } from \"../../components/context/ZudokuContext.js\";\nimport { useAuth } from \"../../hooks/index.js\";\nimport { Button } from \"../../ui/Button.js\";\nimport { Input } from \"../../ui/Input.js\";\nimport type { ApiKeyService } from \"./index.js\";\n\ntype CreateApiKey = { description?: string; expiresOn?: string };\n\nexport const CreateApiKey = ({\n  service,\n  onOpenChange,\n}: {\n  service: ApiKeyService;\n  onOpenChange: (open: boolean) => void;\n}) => {\n  const context = useZudoku();\n  const queryClient = useQueryClient();\n  const navigate = useNavigate();\n  const form = useForm<CreateApiKey>({\n    defaultValues: {\n      expiresOn: \"30\",\n    },\n  });\n  const auth = useAuth();\n\n  const createKeyMutation = useMutation({\n    mutationFn: ({ description, expiresOn }: CreateApiKey) => {\n      if (!service.createKey) {\n        throw new Error(\"createKey not implemented\");\n      }\n\n      const expiresOnDate =\n        expiresOn !== \"never\" ? addDaysToDate(Number(expiresOn)) : undefined;\n\n      return service.createKey({\n        apiKey: {\n          description: description || \"Secret Key\",\n          expiresOn: expiresOnDate,\n        },\n        context,\n        auth,\n      });\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({ queryKey: [\"api-keys\"] });\n      await navigate(\"/settings/api-keys/\");\n    },\n  });\n\n  if (!service.createKey) {\n    return null;\n  }\n\n  return (\n    <form\n      onSubmit={form.handleSubmit((data) =>\n        createKeyMutation.mutate(\n          { ...data },\n          {\n            onSuccess: () => onOpenChange(false),\n          },\n        ),\n      )}\n    >\n      {createKeyMutation.error && (\n        <Alert variant=\"destructive\" className=\"mb-4\">\n          <AlertTitle>Error</AlertTitle>\n          <AlertDescription>{createKeyMutation.error.message}</AlertDescription>\n        </Alert>\n      )}\n      <div className=\"flex gap-2 flex-col text-sm font-medium\">\n        Name\n        <Input {...form.register(\"description\")} />\n        Expiration\n        <Select\n          onValueChange={(value) => form.setValue(\"expiresOn\", value)}\n          defaultValue={form.getValues(\"expiresOn\")}\n        >\n          <SelectTrigger>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectGroup>\n              {[7, 30, 60, 90].map((option) => (\n                <SelectItem value={String(option)} key={option}>\n                  {option} days\n                </SelectItem>\n              ))}\n              <SelectItem value=\"never\">Never</SelectItem>\n            </SelectGroup>\n          </SelectContent>\n        </Select>\n        <DialogFooter>\n          <DialogClose asChild>\n            <Button variant=\"outline\">Cancel</Button>\n          </DialogClose>\n          <ActionButton isPending={createKeyMutation.isPending}>\n            Generate Key\n          </ActionButton>\n        </DialogFooter>\n      </div>\n    </form>\n  );\n};\n\nconst addDaysToDate = (days: number): string => {\n  const date = new Date();\n  date.setDate(date.getDate() + days);\n  return date.toISOString();\n};\n","import type { ReactNode } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"zudoku/ui/Dialog.js\";\nimport { Button } from \"../../ui/Button.js\";\nimport { CreateApiKey } from \"./CreateApiKey.js\";\nimport type { ApiKeyService } from \"./index.js\";\n\ninterface CreateApiKeyDialogProps {\n  service: ApiKeyService;\n  isOpen: boolean;\n  onOpenChange: (open: boolean) => void;\n  trigger?: ReactNode;\n  buttonVariant?:\n    | \"default\"\n    | \"destructive\"\n    | \"outline\"\n    | \"secondary\"\n    | \"ghost\"\n    | \"link\";\n}\n\nexport const CreateApiKeyDialog = ({\n  service,\n  isOpen,\n  onOpenChange,\n  trigger,\n  buttonVariant = \"outline\",\n}: CreateApiKeyDialogProps) => {\n  const defaultTrigger = (\n    <Button variant={buttonVariant}>Create API Key</Button>\n  );\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onOpenChange}>\n      <DialogTrigger asChild>{trigger ?? defaultTrigger}</DialogTrigger>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Create API Key</DialogTitle>\n        </DialogHeader>\n        <CreateApiKey service={service} onOpenChange={onOpenChange} />\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import {\n  useMutation,\n  useQueryClient,\n  useSuspenseQuery,\n} from \"@tanstack/react-query\";\nimport {\n  CheckIcon,\n  CircleSlashIcon,\n  PencilLineIcon,\n  RefreshCwIcon,\n  TrashIcon,\n  XIcon,\n} from \"lucide-react\";\nimport { AnimatePresence } from \"motion/react\";\nimport React, { useState } from \"react\";\nimport { Alert, AlertTitle } from \"zudoku/ui/Alert.js\";\nimport { Card, CardHeader } from \"zudoku/ui/Card.js\";\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"zudoku/ui/Dialog.js\";\nimport { Secret } from \"zudoku/ui/Secret.js\";\nimport { useZudoku } from \"../../components/context/ZudokuContext.js\";\nimport { Slot } from \"../../components/Slot.js\";\nimport { Button } from \"../../ui/Button.js\";\nimport { Input } from \"../../ui/Input.js\";\nimport { cn } from \"../../util/cn.js\";\nimport { CreateApiKeyDialog } from \"./CreateApiKeyDialog.js\";\nimport type { ApiConsumer, ApiKey, ApiKeyService } from \"./index.js\";\n\nexport const SettingsApiKeys = ({ service }: { service: ApiKeyService }) => {\n  const context = useZudoku();\n  const queryClient = useQueryClient();\n  const [editingConsumerId, setEditingConsumerId] = useState<string | null>(\n    null,\n  );\n  const [editingLabel, setEditingLabel] = useState<string>(\"\");\n  const { data, isFetching } = useSuspenseQuery({\n    queryFn: () => service.getConsumers(context),\n    queryKey: [\"api-keys\"],\n    retry: false,\n  });\n\n  const [isCreateApiKeyOpen, setIsCreateApiKeyOpen] = useState(false);\n\n  const deleteKeyMutation = useMutation({\n    mutationFn: ({\n      consumerId,\n      keyId,\n    }: {\n      consumerId: string;\n      keyId: string;\n    }) => {\n      if (!service.deleteKey) {\n        throw new Error(\"deleteKey not implemented\");\n      }\n\n      return service.deleteKey(consumerId, keyId, context);\n    },\n    onMutate: async ({ consumerId, keyId }) => {\n      await queryClient.cancelQueries({ queryKey: [\"api-keys\"] });\n      const previousData = queryClient.getQueryData<ApiConsumer[]>([\n        \"api-keys\",\n      ]);\n      queryClient.setQueryData<ApiConsumer[]>([\"api-keys\"], (old) => {\n        if (!old) {\n          return old;\n        }\n\n        return old.map((consumer) => {\n          if (consumer.id === consumerId) {\n            return {\n              ...consumer,\n              apiKeys: consumer.apiKeys.filter((key) => key.id !== keyId),\n            };\n          }\n          return consumer;\n        });\n      });\n\n      return { previousData };\n    },\n    onError: (_err, _variables, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData([\"api-keys\"], context.previousData);\n      }\n    },\n    onSuccess: () => {\n      void queryClient.invalidateQueries({ queryKey: [\"api-keys\"] });\n    },\n  });\n\n  const updateConsumerMutation = useMutation({\n    mutationFn: ({\n      consumerId,\n      label,\n    }: {\n      consumerId: string;\n      label: string;\n    }) => {\n      if (!service.updateConsumer) {\n        throw new Error(\"updateConsumer not implemented\");\n      }\n\n      return service.updateConsumer({ id: consumerId, label }, context);\n    },\n    onMutate: async ({ consumerId, label }) => {\n      await queryClient.cancelQueries({ queryKey: [\"api-keys\"] });\n\n      const previousData = queryClient.getQueryData([\"api-keys\"]);\n      queryClient.setQueryData<ApiConsumer[]>([\"api-keys\"], (old) => {\n        if (!old) {\n          return old;\n        }\n\n        return old.map((consumer) => {\n          if (consumer.id === consumerId) {\n            return {\n              ...consumer,\n              label,\n            };\n          }\n          return consumer;\n        });\n      });\n\n      return { previousData };\n    },\n    onError: (_err, _variables, context) => {\n      if (context?.previousData) {\n        queryClient.setQueryData([\"api-keys\"], context.previousData);\n      }\n    },\n    onSuccess: () => {\n      void queryClient.invalidateQueries({ queryKey: [\"api-keys\"] });\n    },\n  });\n\n  const rollKeyMutation = useMutation({\n    mutationFn: (id: string) => {\n      if (!service.rollKey) {\n        throw new Error(\"rollKey not implemented\");\n      }\n\n      return service.rollKey(id, context);\n    },\n    onSuccess: () => queryClient.invalidateQueries({ queryKey: [\"api-keys\"] }),\n  });\n\n  const handleStartEdit = (consumerId: string, currentLabel: string) => {\n    setEditingConsumerId(consumerId);\n    setEditingLabel(currentLabel);\n  };\n\n  const handleSaveEdit = (consumerId: string) => {\n    if (editingLabel.trim()) {\n      updateConsumerMutation.mutate({\n        consumerId,\n        label: editingLabel.trim(),\n      });\n    }\n    setEditingConsumerId(null);\n    setEditingLabel(\"\");\n  };\n\n  const handleCancelEdit = () => {\n    setEditingConsumerId(null);\n    setEditingLabel(\"\");\n  };\n\n  return (\n    <div className=\"max-w-screen-md h-full pt-(--padding-content-top) pb-(--padding-content-bottom)\">\n      <Slot.Target name=\"api-keys-list-page\" />\n\n      <div className=\"flex justify-between pb-3\">\n        <h1 className=\"font-medium text-2xl\">API Keys</h1>\n\n        {service.createKey && (\n          <CreateApiKeyDialog\n            service={service}\n            isOpen={isCreateApiKeyOpen}\n            onOpenChange={setIsCreateApiKeyOpen}\n          />\n        )}\n      </div>\n      <p>Create, manage, and monitor your API keys</p>\n\n      <Slot.Target name=\"api-keys-list-page-before-keys\" />\n      <div className=\"h-8\"></div>\n      {rollKeyMutation.isError && (\n        <Alert variant=\"destructive\" className=\"mb-4\">\n          <CircleSlashIcon size={16} />\n          <AlertTitle>{rollKeyMutation.error.message}</AlertTitle>\n        </Alert>\n      )}\n      {updateConsumerMutation.isError && (\n        <Alert variant=\"destructive\" className=\"mb-4\">\n          <CircleSlashIcon size={16} />\n          <AlertTitle>{updateConsumerMutation.error.message}</AlertTitle>\n        </Alert>\n      )}\n      {deleteKeyMutation.isError && (\n        <Alert variant=\"destructive\" className=\"mb-4\">\n          <CircleSlashIcon size={16} />\n          <AlertTitle>{deleteKeyMutation.error.message}</AlertTitle>\n        </Alert>\n      )}\n      <div className=\"\">\n        {data.length === 0 ? (\n          <div className=\"flex col-span-full flex-col justify-center gap-4 items-center p-8 border rounded-sm bg-muted/30 text-muted-foreground\">\n            <p className=\"text-center\">\n              You have no API keys yet.\n              <br />\n              {service.createKey && \"Get started and create your first key.\"}\n            </p>\n            {service.createKey && (\n              <CreateApiKeyDialog\n                service={service}\n                isOpen={isCreateApiKeyOpen}\n                onOpenChange={setIsCreateApiKeyOpen}\n              />\n            )}\n          </div>\n        ) : (\n          <ul\n            className={cn(\n              \"grid grid-cols-[1fr_min-content] divide-y divide-border col-span-6\",\n            )}\n          >\n            {data.map((consumers) => (\n              <Card\n                className=\"grid grid-cols-subgrid col-span-full items-center mb-4 group\"\n                key={consumers.id}\n              >\n                <CardHeader className=\"border-b col-span-full grid-cols-subgrid grid\">\n                  <div className=\"h-10 flex flex-col text-sm justify-center\">\n                    <div className=\"font-medium text-lg flex items-center gap-2\">\n                      {editingConsumerId === consumers.id ? (\n                        <div className=\"flex items-center gap-2 w-full\">\n                          <Input\n                            maxLength={32}\n                            value={editingLabel}\n                            onChange={(e) => setEditingLabel(e.target.value)}\n                            onKeyDown={(e) => {\n                              if (e.key === \"Enter\") {\n                                handleSaveEdit(consumers.id);\n                              } else if (e.key === \"Escape\") {\n                                handleCancelEdit();\n                              }\n                            }}\n                            className=\"text-lg font-medium\"\n                            autoFocus\n                          />\n                          <div className=\"flex items-center\">\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              onClick={() => handleSaveEdit(consumers.id)}\n                              disabled={!editingLabel.trim()}\n                            >\n                              <CheckIcon size={16} />\n                            </Button>\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              onClick={handleCancelEdit}\n                            >\n                              <XIcon size={16} />\n                            </Button>\n                          </div>\n                        </div>\n                      ) : (\n                        consumers.label\n                      )}\n                      <div className=\"text-muted-foreground text-xs\">\n                        {consumers.createdOn}\n                      </div>\n                    </div>\n                    <div className=\"text-muted-foreground text-xs\">\n                      {consumers.createdOn && (\n                        <div>\n                          Created on{\" \"}\n                          {new Date(consumers.createdOn).toLocaleDateString()}\n                        </div>\n                      )}\n                      {consumers.expiresOn && (\n                        <div>\n                          Expires on{\" \"}\n                          {new Date(consumers.expiresOn).toLocaleDateString()}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end\">\n                    {service.updateConsumer && (\n                      <Button\n                        variant=\"ghost\"\n                        onClick={() =>\n                          handleStartEdit(consumers.id, consumers.label)\n                        }\n                        className={cn(\n                          \"flex gap-2\",\n                          editingConsumerId === consumers.id &&\n                            \"opacity-0! pointer-events-none\",\n                        )}\n                        disabled={editingConsumerId === consumers.id}\n                      >\n                        <PencilLineIcon size={16} />\n                        <span className=\"hidden md:block\">Edit label</span>\n                      </Button>\n                    )}\n                    {service.rollKey && (\n                      <Dialog>\n                        <DialogTrigger asChild>\n                          <Button\n                            title=\"Roll this key\"\n                            variant=\"ghost\"\n                            disabled={rollKeyMutation.isPending}\n                            className=\"flex items-center gap-2\"\n                          >\n                            <RefreshCwIcon\n                              size={16}\n                              className={\n                                rollKeyMutation.isPending\n                                  ? \"animate-spin\"\n                                  : undefined\n                              }\n                            />\n                            <span className=\"hidden md:block\">Roll key</span>\n                          </Button>\n                        </DialogTrigger>\n                        <DialogContent>\n                          <DialogHeader>\n                            <DialogTitle>Roll API Key</DialogTitle>\n                            <DialogDescription>\n                              Are you sure you want to roll this API key?\n                            </DialogDescription>\n                          </DialogHeader>\n                          <DialogFooter>\n                            <DialogClose asChild>\n                              <Button variant=\"outline\">Cancel</Button>\n                            </DialogClose>\n                            <DialogClose asChild>\n                              <Button\n                                onClick={() => {\n                                  rollKeyMutation.mutate(consumers.id);\n                                }}\n                              >\n                                Roll Key\n                              </Button>\n                            </DialogClose>\n                          </DialogFooter>\n                        </DialogContent>\n                      </Dialog>\n                    )}\n                  </div>\n                </CardHeader>\n                <div className=\"col-span-full grid-cols-subgrid grid\">\n                  <AnimatePresence>\n                    {consumers.apiKeys.map((apiKey) => (\n                      <React.Fragment key={apiKey.id}>\n                        <RevealApiKey\n                          apiKey={apiKey}\n                          onDeleteKey={() => {\n                            deleteKeyMutation.mutate({\n                              consumerId: consumers.id,\n                              keyId: apiKey.id,\n                            });\n                          }}\n                          className={\n                            deleteKeyMutation.variables?.keyId === apiKey.id &&\n                            (deleteKeyMutation.isPending || isFetching)\n                              ? \"opacity-10!\"\n                              : undefined\n                          }\n                        />\n                        <div className=\"col-span-full h-px bg-border\"></div>\n                      </React.Fragment>\n                    ))}\n                  </AnimatePresence>\n                </div>\n              </Card>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst getTimeAgo = (date: string) => {\n  const now = new Date();\n  const created = new Date(date);\n  const diffInSeconds = Math.floor((now.getTime() - created.getTime()) / 1000);\n\n  const rtf = new Intl.RelativeTimeFormat(\"en\", { numeric: \"auto\" });\n\n  if (diffInSeconds < 60) return rtf.format(-diffInSeconds, \"second\");\n  if (diffInSeconds < 3600)\n    return rtf.format(-Math.floor(diffInSeconds / 60), \"minute\");\n  if (diffInSeconds < 86400)\n    return rtf.format(-Math.floor(diffInSeconds / 3600), \"hour\");\n  if (diffInSeconds < 2592000)\n    return rtf.format(-Math.floor(diffInSeconds / 86400), \"day\");\n  if (diffInSeconds < 31536000)\n    return rtf.format(-Math.floor(diffInSeconds / 2592000), \"month\");\n  return rtf.format(-Math.floor(diffInSeconds / 31536000), \"year\");\n};\n\nconst RevealApiKey = ({\n  apiKey,\n  onDeleteKey,\n  className,\n}: {\n  apiKey: ApiKey;\n  onDeleteKey: () => void;\n  className?: string;\n}) => {\n  const [revealed, setRevealed] = useState(false);\n\n  const { key, createdOn, expiresOn } = apiKey;\n  const isExpired = expiresOn && new Date(expiresOn) < new Date();\n  const daysUntilExpiry = expiresOn\n    ? Math.ceil(\n        (new Date(expiresOn).getTime() - Date.now()) / (1000 * 60 * 60 * 24),\n      )\n    : Infinity;\n  const expiresSoon = daysUntilExpiry <= 7 && !isExpired;\n\n  return (\n    <div className={cn(\"grid col-span-full grid-cols-subgrid p-6\", className)}>\n      <div className=\"flex flex-col gap-1\">\n        <Secret\n          className=\"max-w-fit w-full\"\n          secret={key}\n          status={isExpired ? \"expired\" : expiresSoon ? \"expiring\" : \"active\"}\n          revealed={revealed}\n          onReveal={setRevealed}\n        />\n        <div className=\"flex gap-1 mt-0.5 text-nowrap\">\n          {createdOn && (\n            <span className=\"text-xs text-muted-foreground\">\n              Created {getTimeAgo(createdOn)}.\n            </span>\n          )}{\" \"}\n          {expiresOn && expiresSoon && (\n            <span className=\"text-xs text-primary\">\n              Expires in {daysUntilExpiry}{\" \"}\n              {daysUntilExpiry === 1 ? \"day\" : \"days\"}.\n            </span>\n          )}\n          {expiresOn && isExpired && (\n            <span className=\"text-xs text-primary\">\n              Expired{\" \"}\n              {daysUntilExpiry === 0\n                ? \"today.\"\n                : `${daysUntilExpiry * -1} days ago.`}\n            </span>\n          )}\n        </div>\n      </div>\n      <div className=\"flex justify-end\">\n        {expiresOn && onDeleteKey && (\n          <Dialog>\n            <DialogTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\">\n                <TrashIcon size={16} />\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>Delete API Key</DialogTitle>\n                <DialogDescription>\n                  Are you sure you want to delete this API key?\n                </DialogDescription>\n              </DialogHeader>\n              <DialogFooter>\n                <DialogClose asChild>\n                  <Button variant=\"outline\">Cancel</Button>\n                </DialogClose>\n                <DialogClose asChild>\n                  <Button\n                    onClick={() => {\n                      onDeleteKey();\n                    }}\n                  >\n                    Delete\n                  </Button>\n                </DialogClose>\n              </DialogFooter>\n            </DialogContent>\n          </Dialog>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { KeyRoundIcon } from \"lucide-react\";\nimport type { RouteObject } from \"react-router\";\nimport type { UseAuthReturn } from \"../../authentication/hook.js\";\nimport type {\n  ApiIdentityPlugin,\n  ProfileMenuPlugin,\n  ZudokuPlugin,\n} from \"../../core/plugins.js\";\nimport type { ZudokuContext } from \"../../core/ZudokuContext.js\";\nimport { RouterError } from \"../../errors/RouterError.js\";\nimport invariant from \"../../util/invariant.js\";\nimport { ProtectedRoute } from \"./ProtectedRoute.js\";\nimport { SettingsApiKeys } from \"./SettingsApiKeys.js\";\n\nconst DEFAULT_API_KEY_ENDPOINT = \"https://api.zuploedge.com/v2/client\";\n\nexport type ApiKeyService = {\n  getConsumers: (context: ZudokuContext) => Promise<ApiConsumer[]>;\n  rollKey?: (consumerId: string, context: ZudokuContext) => Promise<void>;\n  deleteKey?: (\n    consumerId: string,\n    keyId: string,\n    context: ZudokuContext,\n  ) => Promise<void>;\n  updateConsumer?: (\n    consumer: { id: string; label?: string },\n    context: ZudokuContext,\n  ) => Promise<void>;\n  getUsage?: (apiKeys: string[], context: ZudokuContext) => Promise<void>;\n  createKey?: ({\n    apiKey,\n    context,\n    auth,\n  }: {\n    apiKey: { description: string; expiresOn?: string };\n    context: ZudokuContext;\n    auth: UseAuthReturn;\n  }) => Promise<void>;\n};\n\nexport type ApiKeyPluginOptions =\n  | ApiKeyService\n  | ({ deploymentName: string } & Partial<ApiKeyService>);\n\nexport interface ApiKey {\n  id: string;\n  description?: string;\n  createdOn?: string;\n  updatedOn?: string;\n  expiresOn?: string;\n  key: string;\n}\n\nexport interface ApiConsumer {\n  id: string;\n  label: string;\n  apiKeys: ApiKey[];\n  description?: string;\n  createdOn?: string;\n  updatedOn?: string;\n  expiresOn?: string;\n  key?: ApiKey;\n}\n\nconst parseJsonSafe = async (response: Response) => {\n  try {\n    return await response.json();\n  } catch {\n    return;\n  }\n};\n\nconst throwIfProblemJson = async (response: Response) => {\n  const contentType = response.headers.get(\"content-type\");\n  if (!response.ok && contentType?.includes(\"application/problem+json\")) {\n    const data = await parseJsonSafe(response);\n    if (data.type && data.title) {\n      throw new Error(data.detail ?? data.title);\n    }\n  }\n};\n\nconst createDefaultHandler = (\n  deploymentName: string,\n  options: ApiKeyPluginOptions,\n): ApiKeyService => {\n  return {\n    deleteKey: async (consumerId, keyId, context) => {\n      const request = new Request(\n        DEFAULT_API_KEY_ENDPOINT +\n          `/${deploymentName}/consumers/${consumerId}/keys/${keyId}`,\n        {\n          method: \"DELETE\",\n        },\n      );\n      await context.signRequest(request);\n      const response = await fetch(request);\n      await throwIfProblemJson(response);\n      invariant(response.ok, \"Failed to delete API key\");\n    },\n    updateConsumer: async (consumer, context) => {\n      const response = await fetch(\n        await context.signRequest(\n          new Request(\n            DEFAULT_API_KEY_ENDPOINT +\n              `/${deploymentName}/consumers/${consumer.id}`,\n            {\n              method: \"PATCH\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({\n                label: consumer.label,\n              }),\n            },\n          ),\n        ),\n      );\n      await throwIfProblemJson(response);\n      invariant(response.ok, \"Failed to update API key description\");\n    },\n    rollKey: async (consumerId, context) => {\n      const response = await fetch(\n        await context.signRequest(\n          new Request(\n            DEFAULT_API_KEY_ENDPOINT +\n              `/${deploymentName}/consumers/${consumerId}/roll-key`,\n            {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({}),\n            },\n          ),\n        ),\n      );\n      await throwIfProblemJson(response);\n      invariant(response.ok, \"Failed to delete API key\");\n    },\n    getConsumers: async (context) => {\n      const request = new Request(\n        `${DEFAULT_API_KEY_ENDPOINT}/${deploymentName}/consumers`,\n      );\n      await context.signRequest(request);\n\n      const keys = await fetch(request);\n      await throwIfProblemJson(keys);\n      invariant(keys.ok, \"Failed to fetch API keys\");\n\n      const data = (await keys.json()) as {\n        data: [\n          {\n            id: string;\n            label?: string;\n            subject?: string;\n            apiKeys: {\n              data: ApiKey[];\n            };\n          },\n        ];\n      };\n\n      return data.data.map((consumer) => ({\n        id: consumer.id,\n        label: consumer.label || consumer.subject || \"API Key\",\n        apiKeys: consumer.apiKeys.data,\n        key: consumer.apiKeys.data.at(0),\n      }));\n    },\n    ...options,\n  };\n};\n\nexport const createApiKeyService = <T extends ApiKeyService>(service: T): T =>\n  service;\n\nexport const apiKeyPlugin = (\n  options: ApiKeyPluginOptions,\n): ZudokuPlugin & ApiIdentityPlugin & ProfileMenuPlugin => {\n  const service: ApiKeyService =\n    \"deploymentName\" in options\n      ? createDefaultHandler(options.deploymentName, options)\n      : options;\n\n  return {\n    getProfileMenuItems: () => [\n      {\n        label: \"API Keys\",\n        path: \"/settings/api-keys\",\n        category: \"middle\",\n        icon: KeyRoundIcon,\n      },\n    ],\n\n    getIdentities: async (context) => {\n      try {\n        const consumers = await service.getConsumers(context);\n\n        return consumers.map((consumer) => ({\n          authorizeRequest: (request) => {\n            request.headers.set(\n              \"Authorization\",\n              `Bearer ${consumer.apiKeys.at(0)?.key}`,\n            );\n            return request;\n          },\n          id: consumer.id,\n          label: consumer.label,\n        }));\n      } catch {\n        return [];\n      }\n    },\n    getRoutes: (): RouteObject[] => {\n      return [\n        {\n          element: <ProtectedRoute />,\n          errorElement: <RouterError />,\n          children: [\n            {\n              path: \"/settings/api-keys\",\n              element: <SettingsApiKeys service={service} />,\n            },\n          ],\n        },\n      ];\n    },\n  };\n};\n"],"names":["ProtectedRoute","auth","useAuth","jsx","Outlet","jsxs","Button","DeveloperHint","LayoutGroupContext","createContext","useConstant","init","ref","useRef","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","PresenceContext","isObject","value","isHTMLElement","element","MotionConfigContext","p","PopChildMeasure","React","prevProps","parent","parentWidth","size","PopChild","children","isPresent","anchorX","root","id","useId","nonce","useContext","useInsertionEffect","width","height","top","left","right","x","style","PresenceChild","initial","onExitComplete","custom","presenceAffectsLayout","mode","presenceChildren","newChildrenMap","isReusedContext","context","useMemo","childId","isComplete","_","key","usePresence","subscribe","register","safeToRemove","useCallback","getChildKey","child","onlyElements","filtered","Children","isValidElement","AnimatePresence","propagate","isParentPresent","presentChildren","presentKeys","isInitialRender","pendingPresentChildren","exitComplete","diffedChildren","setDiffedChildren","useState","renderedChildren","setRenderedChildren","i","exitingChildren","nextChildren","forceRender","Fragment","onExit","isEveryExitComplete","isExitComplete","ActionButton","forwardRef","isPending","className","props","cn","Spinner","CreateApiKey","service","onOpenChange","useZudoku","queryClient","useQueryClient","navigate","useNavigate","form","useForm","createKeyMutation","useMutation","description","expiresOn","expiresOnDate","addDaysToDate","data","Alert","AlertTitle","AlertDescription","Input","Select","SelectTrigger","SelectValue","SelectContent","SelectGroup","option","SelectItem","DialogFooter","DialogClose","days","date","CreateApiKeyDialog","isOpen","trigger","buttonVariant","defaultTrigger","Dialog","DialogTrigger","DialogContent","DialogHeader","DialogTitle","SettingsApiKeys","editingConsumerId","setEditingConsumerId","editingLabel","setEditingLabel","isFetching","useSuspenseQuery","isCreateApiKeyOpen","setIsCreateApiKeyOpen","deleteKeyMutation","consumerId","keyId","previousData","old","consumer","_err","_variables","updateConsumerMutation","label","rollKeyMutation","handleStartEdit","currentLabel","handleSaveEdit","handleCancelEdit","Slot","CircleSlashIcon","consumers","Card","CardHeader","e","CheckIcon","XIcon","PencilLineIcon","RefreshCwIcon","DialogDescription","apiKey","RevealApiKey","getTimeAgo","now","created","diffInSeconds","rtf","onDeleteKey","revealed","setRevealed","createdOn","isExpired","daysUntilExpiry","expiresSoon","Secret","TrashIcon","DEFAULT_API_KEY_ENDPOINT","parseJsonSafe","response","throwIfProblemJson","contentType","createDefaultHandler","deploymentName","options","request","invariant","keys","createApiKeyService","apiKeyPlugin","KeyRoundIcon","RouterError"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13]}