<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js Implementation - AEAT VERI*FACTU API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))",
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))",
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))",
                        },
                    },
                }
            }
        }
    </script>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
        }
        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 217.2 91.2% 59.8%;
            --primary-foreground: 222.2 84% 4.9%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 224.3 76.3% 94.1%;
        }
    </style>
</head>
<body class="h-full bg-background text-foreground">
    <div class="grid max-w-screen-2xl w-full mx-auto grid-rows-[min-content_1fr] grid-cols-1 lg:grid-cols-[280px_1fr]">
        <!-- Sidebar -->
        <aside class="hidden lg:block border-r bg-card">
            <div class="p-6">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <span class="text-primary-foreground font-bold text-sm">AEAT</span>
                    </div>
                    <div>
                        <h1 class="font-semibold text-lg">VERI*FACTU API</h1>
                        <p class="text-sm text-muted-foreground">Documentation</p>
                    </div>
                </div>
                
                <nav class="space-y-1">
                    <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Documentation</div>
                    <a href="index.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                        </svg>
                        Welcome
                    </a>
                    <a href="authentication.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                        </svg>
                        Authentication
                    </a>
                    
                    <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3 mt-6">API Reference</div>
                    <a href="alta-register-invoice.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Register Invoice
                    </a>
                    <a href="baja-cancel-invoice.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        Cancel Invoice
                    </a>
                    <a href="consulta-query-invoice.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        Query Invoice
                    </a>
                    <a href="parameters-and-fields.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Parameters & Fields
                    </a>
                    <a href="error-handling.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        Error Handling
                    </a>
                    <a href="xsd-schema-reference.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                        XSD Schema
                    </a>
                    
                    <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3 mt-6">Getting Started</div>
                    <a href="authentication.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                        </svg>
                        Authentication Setup
                    </a>
                    <a href="node-implementation.html" class="flex items-center gap-3 px-3 py-2 rounded-md bg-accent text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                        Node.js Implementation
                    </a>
                    <a href="examples.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                        Examples
                    </a>
                    <a href="testing.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Testing
                    </a>
                    <a href="quick-reference.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        Quick Reference
                    </a>
                </nav>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="px-4 lg:px-8 py-8">
            <div class="prose dark:prose-invert prose-neutral max-w-none">
                <div class="text-sm font-semibold text-primary mb-2">Node.js Implementation</div>
                <h1 class="group relative text-4xl font-extrabold flex gap-3.5 items-center mb-6">
                    STEP 2 & 4: Database Setup & Code Implementation
                </h1>
                
                <div class="p-4 bg-yellow-50 rounded-md mb-6">
                    <p class="text-sm text-yellow-800"><strong>⚠️ Disclaimer:</strong> This is a non-official implementation guide with example code. </p>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Overview</h2>
                    <p class="text-muted-foreground mb-4">This document provides step-by-step guidance for implementing the AEAT VERI*FACTU webservice in your CRM. Follow these steps in order for a successful integration.</p>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Database Setup</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">How it works in your CRM</h3>
                    <div class="bg-muted p-6 rounded-md text-center font-mono text-sm mb-4">
                        Your CRM ──► AEAT ──► CSV Code<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─► Back to your CRM<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└─► Validates invoice<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;└─► Sends invoice
                    </div>
                    
                    <h3 class="text-lg font-semibold mb-3">Database Changes</h3>
                    <p class="text-muted-foreground mb-4">Add these columns to your invoices table:</p>
                    <div class="bg-muted p-4 rounded-md">
                        <pre class="text-sm font-mono"><code>-- Add these columns to your invoices table
ALTER TABLE invoices ADD COLUMN aeat_csv_code VARCHAR(100);
ALTER TABLE invoices ADD COLUMN aeat_status VARCHAR(20);
ALTER TABLE invoices ADD COLUMN aeat_error TEXT;</code></pre>
                    </div>
                    
                    <div class="p-4 bg-blue-50 rounded-md mt-4">
                        <h4 class="font-semibold text-blue-800 mb-2">What these columns mean:</h4>
                        <ul class="text-sm text-blue-700 space-y-1">
                            <li><strong>aeat_csv_code</strong> = The special code that AEAT returns</li>
                            <li><strong>aeat_status</strong> = Whether the invoice is approved or not</li>
                            <li><strong>aeat_error</strong> = If something goes wrong, the error is stored here</li>
                        </ul>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Code Implementation</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">Basic function to send invoice</h3>
                    <div class="bg-muted p-4 rounded-md">
                        <pre class="text-sm font-mono"><code>// This is the main function you call
async function sendInvoiceToAEAT(invoice) {
  try {
    console.log('📤 Sending invoice to AEAT...');
    
    // Send to AEAT
    const response = await sendToAEAT(invoice);
    
    // Save the result
    await saveAEATResult(invoice.id, response);
    
    console.log('✅ Done! CSV code:', response.csv);
    
  } catch (error) {
    console.log('❌ Error:', error.message);
    await saveError(invoice.id, error.message);
  }
}</code></pre>
                    </div>
                    
                    <h3 class="text-lg font-semibold mb-3 mt-6">Complete implementation example</h3>
                    <div class="bg-muted p-4 rounded-md">
                        <pre class="text-sm font-mono"><code>const https = require('https');
const fs = require('fs');

// Certificate configuration
const certificate = {
  key: fs.readFileSync('/path/to/your/client-key.pem'),
  cert: fs.readFileSync('/path/to/your/client-cert.pem'),
  ca: fs.readFileSync('/path/to/your/ca-cert.pem')
};

// AEAT configuration
const aeatConfig = {
  hostname: 'prewww1.aeat.es',
  port: 443,
  path: '/wlpl/TIKE-CONT/ws/SistemaFacturacion/VerifactuSOAP',
  method: 'POST',
  headers: {
    'Content-Type': 'text/xml; charset=utf-8',
    'SOAPAction': 'urn:VeriFactu/Alta'
  }
};

// Main function to send invoice
async function sendInvoiceToAEAT(invoice) {
  try {
    console.log('📤 Sending invoice to AEAT...');
    
    // Create SOAP request
    const soapBody = createSOAPRequest(invoice);
    
    // Make HTTPS request
    const response = await makeHTTPSRequest(soapBody);
    
    // Parse response
    const result = parseSOAPResponse(response);
    
    // Save to database
    await saveAEATResult(invoice.id, result);
    
    console.log('✅ Done! CSV code:', result.csv);
    return result;
    
  } catch (error) {
    console.log('❌ Error:', error.message);
    await saveError(invoice.id, error.message);
    throw error;
  }
}

// Create SOAP request XML
function createSOAPRequest(invoice) {
  return `<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <verifactu:Alta>
      <verifactu:Cabecera>
        <verifactu:NIF>${invoice.nif}</verifactu:NIF>
        <verifactu:Fecha>${invoice.fecha}</verifactu:Fecha>
        <verifactu:Hora>${invoice.hora}</verifactu:Hora>
        <verifactu:Serie>${invoice.serie || ''}</verifactu:Serie>
        <verifactu:NumFactura>${invoice.numero}</verifactu:NumFactura>
      </verifactu:Cabecera>
      <verifactu:Factura>
        <verifactu:ImporteTotal>${invoice.importeTotal}</verifactu:ImporteTotal>
        <verifactu:ImporteTotalConImpuestos>${invoice.importeTotalConImpuestos}</verifactu:ImporteTotalConImpuestos>
        <verifactu:TipoFactura>${invoice.tipoFactura}</verifactu:TipoFactura>
        <verifactu:ClaveRegimenEspecialOTrascendencia>${invoice.claveRegimen}</verifactu:ClaveRegimenEspecialOTrascendencia>
      </verifactu:Factura>
    </verifactu:Alta>
  </soap:Body>
</soap:Envelope>`;
}

// Make HTTPS request with mutual TLS
function makeHTTPSRequest(soapBody) {
  return new Promise((resolve, reject) => {
    const options = {
      ...aeatConfig,
      ...certificate
    };
    
    const req = https.request(options, (res) => {
      let data = '';
      res.on('data', (chunk) => {
        data += chunk;
      });
      res.on('end', () => {
        resolve(data);
      });
    });
    
    req.on('error', (error) => {
      reject(error);
    });
    
    req.write(soapBody);
    req.end();
  });
}

// Parse SOAP response
function parseSOAPResponse(xmlResponse) {
  // Simple XML parsing (in production, use a proper XML parser)
  const csvMatch = xmlResponse.match(/<verifactu:CSV>(.*?)<\/verifactu:CSV>/);
  const codigoMatch = xmlResponse.match(/<verifactu:Codigo>(.*?)<\/verifactu:Codigo>/);
  const descripcionMatch = xmlResponse.match(/<verifactu:Descripcion>(.*?)<\/verifactu:Descripcion>/);
  
  return {
    csv: csvMatch ? csvMatch[1] : null,
    codigo: codigoMatch ? codigoMatch[1] : null,
    descripcion: descripcionMatch ? descripcionMatch[1] : null,
    success: codigoMatch && codigoMatch[1] === '0'
  };
}

// Save AEAT result to database
async function saveAEATResult(invoiceId, result) {
  // Update your database here
  const query = `
    UPDATE invoices 
    SET aeat_csv_code = ?, 
        aeat_status = ?, 
        aeat_error = NULL 
    WHERE id = ?
  `;
  
  const status = result.success ? 'verified' : 'error';
  await db.query(query, [result.csv, status, invoiceId]);
}

// Save error to database
async function saveError(invoiceId, errorMessage) {
  const query = `
    UPDATE invoices 
    SET aeat_status = 'error', 
        aeat_error = ? 
    WHERE id = ?
  `;
  
  await db.query(query, [errorMessage, invoiceId]);
}</code></pre>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Error Handling</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">Common Error Scenarios</h3>
                    <div class="grid gap-4 md:grid-cols-3">
                        <div class="p-4 bg-red-50 rounded-md">
                            <h4 class="font-semibold text-red-800 mb-2">Network Errors</h4>
                            <ul class="text-sm text-red-700 space-y-1">
                                <li>Connection timeout</li>
                                <li>Certificate validation failed</li>
                                <li>DNS resolution failed</li>
                            </ul>
                        </div>
                        
                        <div class="p-4 bg-orange-50 rounded-md">
                            <h4 class="font-semibold text-orange-800 mb-2">SOAP Errors</h4>
                            <ul class="text-sm text-orange-700 space-y-1">
                                <li>Invalid XML format</li>
                                <li>Missing required fields</li>
                                <li>Authentication failed</li>
                            </ul>
                        </div>
                        
                        <div class="p-4 bg-yellow-50 rounded-md">
                            <h4 class="font-semibold text-yellow-800 mb-2">Business Logic Errors</h4>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>Invalid invoice data</li>
                                <li>Duplicate invoice number</li>
                                <li>Tax calculation errors</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3 class="text-lg font-semibold mb-3 mt-6">Error Handling Best Practices</h3>
                    <div class="bg-muted p-4 rounded-md">
                        <pre class="text-sm font-mono"><code>// Robust error handling
async function sendInvoiceToAEAT(invoice) {
  try {
    // Validate input
    validateInvoiceData(invoice);
    
    // Send to AEAT
    const response = await sendToAEAT(invoice);
    
    // Validate response
    validateAEATResponse(response);
    
    // Save result
    await saveAEATResult(invoice.id, response);
    
    return { success: true, csv: response.csv };
    
  } catch (error) {
    // Log error
    console.error('AEAT Error:', error);
    
    // Save error to database
    await saveError(invoice.id, error.message);
    
    // Return error information
    return { 
      success: false, 
      error: error.message,
      code: error.code || 'UNKNOWN_ERROR'
    };
  }
}</code></pre>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Testing</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">Test Environment</h3>
                    <div class="p-4 bg-yellow-50 rounded-md">
                        <div class="flex items-start gap-3">
                            <svg class="w-5 h-5 text-yellow-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                            </svg>
                            <div>
                                <h4 class="font-semibold text-yellow-800 mb-1">Important</h4>
                                <p class="text-sm text-yellow-700">Always test with the test environment first. The test environment URL is: <code class="bg-yellow-100 px-1 rounded">https://prewww1.aeat.es/wlpl/TIKE-CONT/ws/SistemaFacturacion/VerifactuSOAP</code></p>
                            </div>
                        </div>
                    </div>
                    
                    <h3 class="text-lg font-semibold mb-3 mt-6">Test Data</h3>
                    <div class="bg-muted p-4 rounded-md">
                        <pre class="text-sm font-mono"><code>// Test invoice data
const testInvoice = {
  nif: '12345678A',
  fecha: '2024-01-15',
  hora: '10:30:00',
  serie: 'A',
  numero: '00001',
  importeTotal: '100.00',
  importeTotalConImpuestos: '121.00',
  tipoFactura: 'F1',
  claveRegimen: '01'
};</code></pre>
                    </div>
                </div>
                
                <div class="p-4 bg-green-50 rounded-md">
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-green-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <div>
                            <h4 class="font-semibold text-green-800 mb-1">Next Steps</h4>
                            <p class="text-sm text-green-700">After implementing the code, test thoroughly with the test environment before moving to production. Make sure to handle all error scenarios and implement proper logging.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>