<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancel Invoice - AEAT VERI*FACTU API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))",
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))",
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))",
                        },
                    },
                }
            }
        }
    </script>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
        }
        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 217.2 91.2% 59.8%;
            --primary-foreground: 222.2 84% 4.9%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 224.3 76.3% 94.1%;
        }
    </style>
</head>
<body class="h-full bg-background text-foreground">
    <div class="grid max-w-screen-2xl w-full mx-auto grid-rows-[min-content_1fr] grid-cols-1 lg:grid-cols-[280px_1fr]">
        <!-- Sidebar -->
        <aside class="hidden lg:block border-r bg-card">
            <div class="p-6">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <span class="text-primary-foreground font-bold text-sm">AEAT</span>
                    </div>
                    <div>
                        <h1 class="font-semibold text-lg">VERI*FACTU API</h1>
                        <p class="text-sm text-muted-foreground">Documentation</p>
                    </div>
                </div>
                
                <nav class="space-y-1">
                    <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Documentation</div>
                    <a href="index.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                        </svg>
                        Welcome
                    </a>
                    <a href="authentication.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                        </svg>
                        Authentication
                    </a>
                    
                    <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3 mt-6">API Reference</div>
                    <a href="alta-register-invoice.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Register Invoice
                    </a>
                    <a href="baja-cancel-invoice.html" class="flex items-center gap-3 px-3 py-2 rounded-md bg-accent text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        Cancel Invoice
                    </a>
                    <a href="consulta-query-invoice.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        Query Invoice
                    </a>
                    <a href="parameters-and-fields.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Parameters & Fields
                    </a>
                    <a href="error-handling.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        Error Handling
                    </a>
                    <a href="xsd-schema-reference.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                        XSD Schema
                    </a>
                    
                    <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3 mt-6">Getting Started</div>
                    <a href="authentication.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                        </svg>
                        Authentication Setup
                    </a>
                    <a href="node-implementation.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                        Node.js Implementation
                    </a>
                    <a href="examples.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                        Examples
                    </a>
                    <a href="quick-reference.html" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        Quick Reference
                    </a>
                </nav>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="px-4 lg:px-8 py-8">
            <div class="prose dark:prose-invert prose-neutral max-w-none">
                <div class="text-sm font-semibold text-primary mb-2">Cancel Invoice</div>
                <h1 class="group relative text-4xl font-extrabold flex gap-3.5 items-center mb-6">
                    Cancel Invoice (Baja/Anulación)
                </h1>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Overview</h2>
                    <p class="text-muted-foreground mb-4">The Baja operation is used to cancel previously registered invoices with the Spanish tax authority (AEAT). This operation is required when invoices need to be voided, corrected, or annulled.</p>
                    
                    <div class="grid gap-4 md:grid-cols-2">
                        <div class="space-y-2">
                            <h3 class="text-lg font-semibold">Purpose</h3>
                            <ul class="space-y-1 text-sm">
                                <li class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                    <span><strong>Invoice Cancellation</strong>: Cancel previously registered invoices</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                    </svg>
                                    <span><strong>Error Correction</strong>: Handle registration errors</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                    </svg>
                                    <span><strong>Compliance</strong>: Maintain audit trail of cancellations</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                    </svg>
                                    <span><strong>Data Integrity</strong>: Ensure accurate tax records</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">SOAP Action</h2>
                    <div class="bg-muted p-4 rounded-md text-center">
                        <code class="text-sm font-mono">SOAPAction: "urn:VeriFactu/Baja"</code>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Complete SOAP Request Example</h2>
                    
                    <div class="bg-muted p-4 rounded-md mb-4">
                        <pre class="text-sm font-mono overflow-x-auto"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:verifactu="urn:VeriFactu"
               xmlns:aeat="http://www.aeat.es/verifactu"
               xmlns:factura="urn:VeriFactu:Factura"
               xmlns:cabecera="urn:VeriFactu:Cabecera"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;
  &lt;soap:Header&gt;
    &lt;aeat:Autenticacion&gt;
      &lt;aeat:Certificado&gt;BASE64_ENCODED_CERTIFICATE&lt;/aeat:Certificado&gt;
    &lt;/aeat:Autenticacion&gt;
  &lt;/soap:Header&gt;
  &lt;soap:Body&gt;
    &lt;verifactu:Baja&gt;
      &lt;verifactu:Cabecera&gt;
        &lt;verifactu:NIFEmisor&gt;12345678Z&lt;/verifactu:NIFEmisor&gt;
        &lt;verifactu:FechaEnvio&gt;2024-01-15T10:30:00&lt;/verifactu:FechaEnvio&gt;
        &lt;verifactu:TiempoEsperaEnvio&gt;30&lt;/verifactu:TiempoEsperaEnvio&gt;
        &lt;verifactu:TipoComunicacion&gt;Baja&lt;/verifactu:TipoComunicacion&gt;
        &lt;verifactu:NumeroRegistro&gt;REG001&lt;/verifactu:NumeroRegistro&gt;
        &lt;verifactu:Observaciones&gt;Invoice cancellation request&lt;/verifactu:Observaciones&gt;
      &lt;/verifactu:Cabecera&gt;
      &lt;verifactu:Factura&gt;
        &lt;verifactu:NumFactura&gt;INV-2024-001&lt;/verifactu:NumFactura&gt;
        &lt;verifactu:FechaFactura&gt;2024-01-15&lt;/verifactu:FechaFactura&gt;
        &lt;verifactu:NIFReceptor&gt;87654321A&lt;/verifactu:NIFReceptor&gt;
        &lt;verifactu:ImporteTotal&gt;1000.00&lt;/verifactu:ImporteTotal&gt;
        &lt;verifactu:TipoFactura&gt;F1&lt;/verifactu:TipoFactura&gt;
        &lt;verifactu:SerieFactura&gt;A&lt;/verifactu:SerieFactura&gt;
        &lt;verifactu:FechaOperacion&gt;2024-01-15&lt;/verifactu:FechaOperacion&gt;
        &lt;verifactu:ClaveRegimenEspecialOTrascendencia&gt;01&lt;/verifactu:ClaveRegimenEspecialOTrascendencia&gt;
        &lt;verifactu:DescripcionOperacion&gt;Sale of goods&lt;/verifactu:DescripcionOperacion&gt;
        &lt;verifactu:TipoDesglose&gt;DesgloseTipoOperacion&lt;/verifactu:TipoDesglose&gt;
        &lt;verifactu:MotivoBaja&gt;
          &lt;verifactu:CodigoMotivoBaja&gt;01&lt;/verifactu:CodigoMotivoBaja&gt;
          &lt;verifactu:DescripcionMotivoBaja&gt;Customer request&lt;/verifactu:DescripcionMotivoBaja&gt;
        &lt;/verifactu:MotivoBaja&gt;
        &lt;verifactu:ReferenciaFacturaOriginal&gt;
          &lt;verifactu:NumFacturaOriginal&gt;INV-2024-001&lt;/verifactu:NumFacturaOriginal&gt;
          &lt;verifactu:FechaFacturaOriginal&gt;2024-01-15&lt;/verifactu:FechaFacturaOriginal&gt;
          &lt;verifactu:CSVOriginal&gt;ABC123DEF456&lt;/verifactu:CSVOriginal&gt;
        &lt;/verifactu:ReferenciaFacturaOriginal&gt;
      &lt;/verifactu:Factura&gt;
    &lt;/verifactu:Baja&gt;
  &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;</code></pre>
                    </div>
                    
                    <div class="p-4 bg-blue-50 rounded-md mb-4">
                        <h4 class="font-semibold text-blue-800 mb-2">Required HTTP Headers:</h4>
                        <div class="bg-muted p-3 rounded text-sm font-mono">
                            <div>Content-Type: application/soap+xml; charset=utf-8</div>
                            <div>SOAPAction: "urn:VeriFactu/Baja"</div>
                            <div>Content-Length: [calculated]</div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-yellow-50 rounded-md">
                        <h4 class="font-semibold text-yellow-800 mb-2">Authentication:</h4>
                        <ul class="text-sm text-yellow-700 space-y-1">
                            <li>• Mutual TLS with FNMT certificate</li>
                            <li>• Certificate must be valid and not expired</li>
                            <li>• Certificate must be properly installed on client system</li>
                        </ul>
                    </div>
                </div>
                
                <div class="grid gap-6 md:grid-cols-2 mb-8">
                    <div class="rounded-lg border bg-card p-6">
                        <h2 class="text-xl font-semibold mb-4">Required Fields</h2>
                        
                        <h3 class="text-lg font-semibold mb-3">Header Information (Cabecera)</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>NIF</strong>: Tax identification number of the issuer</li>
                            <li><strong>Fecha</strong>: Date of the original invoice</li>
                            <li><strong>Hora</strong>: Time of the original invoice</li>
                            <li><strong>Serie</strong>: Invoice series (optional)</li>
                            <li><strong>NumFactura</strong>: Invoice number to cancel</li>
                        </ul>
                    </div>
                    
                    <div class="rounded-lg border bg-card p-6">
                        <h3 class="text-lg font-semibold mb-3">Invoice Data (Factura)</h3>
                        <ul class="space-y-2 text-sm">
                            <li><strong>ImporteTotal</strong>: Total amount of the original invoice</li>
                            <li><strong>ImporteTotalConImpuestos</strong>: Total amount including taxes</li>
                            <li><strong>TipoFactura</strong>: Type of invoice (F1, F2, etc.)</li>
                            <li><strong>ClaveRegimenEspecialOTrascendencia</strong>: Special regime key</li>
                        </ul>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Complete SOAP Response Examples</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">Success Response</h3>
                    <div class="bg-muted p-4 rounded-md mb-4">
                        <pre class="text-sm font-mono overflow-x-auto"><code><?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:verifactu="urn:VeriFactu"
               xmlns:aeat="http://www.aeat.es/verifactu"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Header>
    <aeat:RespuestaAutenticacion>
      <aeat:Estado>Correcto</aeat:Estado>
      <aeat:Timestamp>2024-01-15T10:30:30</aeat:Timestamp>
    </aeat:RespuestaAutenticacion>
  </soap:Header>
  <soap:Body>
    <verifactu:BajaResponse>
      <verifactu:EstadoEnvio>Correcto</verifactu:EstadoEnvio>
      <verifactu:TiempoEsperaEnvio>30</verifactu:TiempoEsperaEnvio>
      <verifactu:Timestamp>2024-01-15T10:30:30</verifactu:Timestamp>
      <verifactu:RespuestaLinea>
        <verifactu:IDDetalleFactura>1</verifactu:IDDetalleFactura>
        <verifactu:EstadoRegistro>Correcto</verifactu:EstadoRegistro>
        <verifactu:CSV>ABC123DEF456</verifactu:CSV>
        <verifactu:Timestamp>2024-01-15T10:30:30</verifactu:Timestamp>
        <verifactu:NumeroRegistro>REG001</verifactu:NumeroRegistro>
        <verifactu:Observaciones>Invoice successfully cancelled</verifactu:Observaciones>
        <verifactu:MotivoBajaProcesado>
          <verifactu:CodigoMotivoBaja>01</verifactu:CodigoMotivoBaja>
          <verifactu:DescripcionMotivoBaja>Customer request</verifactu:DescripcionMotivoBaja>
        </verifactu:MotivoBajaProcesado>
      </verifactu:RespuestaLinea>
      <verifactu:Resumen>
        <verifactu:TotalFacturas>1</verifactu:TotalFacturas>
        <verifactu:FacturasCorrectas>1</verifactu:FacturasCorrectas>
        <verifactu:FacturasIncorrectas>0</verifactu:FacturasIncorrectas>
        <verifactu:ImporteTotal>1000.00</verifactu:ImporteTotal>
      </verifactu:Resumen>
    </verifactu:BajaResponse>
  </soap:Body>
</soap:Envelope></code></pre>
                    </div>
                    
                    <div class="p-4 bg-green-50 rounded-md mb-4">
                        <h4 class="font-semibold text-green-800 mb-2">Success Response Fields:</h4>
                        <ul class="text-sm text-green-700 space-y-1">
                            <li><strong>EstadoEnvio</strong>: Overall operation status (Correcto, Rechazado, AceptadoConErrores)</li>
                            <li><strong>CSV</strong>: Secure verification code for the cancellation</li>
                            <li><strong>EstadoRegistro</strong>: Per-invoice cancellation status</li>
                            <li><strong>MotivoBajaProcesado</strong>: Processed cancellation reason</li>
                            <li><strong>Resumen</strong>: Summary of processed cancellations</li>
                        </ul>
                    </div>
                    
                    <h3 class="text-lg font-semibold mb-3">Error Response</h3>
                    <div class="bg-muted p-4 rounded-md mb-4">
                        <pre class="text-sm font-mono overflow-x-auto"><code><?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:verifactu="urn:VeriFactu"
               xmlns:aeat="http://www.aeat.es/verifactu"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Header />
  <soap:Body>
    <soap:Fault>
      <faultcode>soap:Server</faultcode>
      <faultstring>Error processing cancellation request</faultstring>
      <detail>
        <aeat:Error>
          <aeat:CodigoError>E301</aeat:CodigoError>
          <aeat:DescripcionError>Invoice not found or already cancelled</aeat:DescripcionError>
          <aeat:Timestamp>2024-01-15T10:30:30</aeat:Timestamp>
        </aeat:Error>
      </detail>
    </soap:Fault>
  </soap:Body>
</soap:Envelope></code></pre>
                    </div>
                    
                    <div class="p-4 bg-red-50 rounded-md">
                        <h4 class="font-semibold text-red-800 mb-2">Error Response Fields:</h4>
                        <ul class="text-sm text-red-700 space-y-1">
                            <li><strong>faultcode</strong>: SOAP fault code (soap:Server, soap:Client)</li>
                            <li><strong>faultstring</strong>: Human-readable error description</li>
                            <li><strong>CodigoError</strong>: AEAT-specific error code</li>
                            <li><strong>DescripcionError</strong>: Detailed error description</li>
                        </ul>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Error Handling</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">Common Error Codes</h3>
                    <div class="grid gap-4 md:grid-cols-2">
                        <div class="p-4 bg-red-50 rounded-md">
                            <h4 class="font-semibold text-red-800 mb-2">Validation Errors</h4>
                            <ul class="text-sm text-red-700 space-y-1">
                                <li><strong>3001</strong>: Invoice not found</li>
                                <li><strong>3002</strong>: Invoice already cancelled</li>
                                <li><strong>3003</strong>: Invalid cancellation reason</li>
                            </ul>
                        </div>
                        
                        <div class="p-4 bg-orange-50 rounded-md">
                            <h4 class="font-semibold text-orange-800 mb-2">System Errors</h4>
                            <ul class="text-sm text-orange-700 space-y-1">
                                <li><strong>4001</strong>: Service temporarily unavailable</li>
                                <li><strong>4002</strong>: Database connection error</li>
                                <li><strong>4003</strong>: Authentication failed</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="rounded-lg border bg-card p-6 mb-8">
                    <h2 class="text-2xl font-semibold mb-4">Implementation Example</h2>
                    
                    <h3 class="text-lg font-semibold mb-3">Node.js Implementation</h3>
                    <div class="bg-muted p-4 rounded-md">
                        <pre class="text-sm font-mono"><code>const https = require('https');
const fs = require('fs');

// Certificate configuration
const options = {
  key: fs.readFileSync('client-key.pem'),
  cert: fs.readFileSync('client-cert.pem'),
  ca: fs.readFileSync('ca-cert.pem'),
  hostname: 'prewww1.aeat.es',
  port: 443,
  path: '/wlpl/TIKE-CONT/ws/SistemaFacturacion/VerifactuSOAP',
  method: 'POST',
  headers: {
    'Content-Type': 'text/xml; charset=utf-8',
    'SOAPAction': 'urn:VeriFactu/Baja'
  }
};

// SOAP request body
const soapBody = `<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <verifactu:Baja>
      <!-- Your cancellation data here -->
    </verifactu:Baja>
  </soap:Body>
</soap:Envelope>`;

// Make the request
const req = https.request(options, (res) => {
  let data = '';
  res.on('data', (chunk) => {
    data += chunk;
  });
  res.on('end', () => {
    console.log('Response:', data);
  });
});

req.on('error', (error) => {
  console.error('Error:', error);
});

req.write(soapBody);
req.end();</code></pre>
                    </div>
                </div>
                
                <div class="p-4 bg-red-50 rounded-md">
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-red-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        <div>
                            <h4 class="font-semibold text-red-800 mb-1">Important</h4>
                            <p class="text-sm text-red-700">Cancellation must be performed within the legal timeframe specified by Spanish tax regulations. Always verify the original invoice data before cancellation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>